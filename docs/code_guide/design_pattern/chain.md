# 职责链模式

> 责任链，用来处理相关事务责任的一条执行链，执行链上有多个节点，每个节点都有机会（条件匹配）处理请求事务，如果某个节点处理完了就可以根据实际业务需求传递给下一个节点继续处理或者返回处理完毕。

## 意图

避免请求发送者与接收者耦合在一起，让多个对象都有可能接收请求，将这些对象连接成一条链，并且沿着这条链传递请求，直到有对象处理它为止（并且可以选择是否继续向后处理）。



## 适用性

适用场景：

- Web服务：过滤器，审批



## 类图

解责任链模式应当理解其模式，而不是其具体实现。责任链模式的独到之处是**将其节点处理者组合成了链式结构**，并**允许节点自身决定是否进行请求处理或转发**，相当于让请求流动起来。（Spring中的filter模式对其做了改动，用户不需要显示创建链的操作）

![责任链模式的结构图](.pics/chain/chain.png)



![责任链](.pics/chain/call_flow.png)



1. 抽象处理者（Handler）角色：定义一个处理请求的接口，包含抽象处理方法和一个后继连接。
2. 具体处理者（Concrete Handler）角色：实现抽象处理者的处理方法，判断能否处理本次请求，如果可以处理请求则处理，否则将该请求转给它的后继者。
3. 客户类（Client）角色：创建处理链，并向链头的具体处理者对象提交请求，它不关心处理细节和请求的传递过程。



## 优劣势

**优点：** 

- 降低耦合度：它将请求的发送者和接收者解耦；
- 简化对象：使得对象不需要知道链的结构；
- 增强给对象指派职责的灵活性。通过改变链内的成员或者调动它们的次序，允许动态地新增或者删除责任；
- 增加新的请求处理类很方便。

**缺点：** 

- 不能保证请求一定被接收；
- 系统性能将受到一定影响，而且在进行代码调试时不太方便，可能会造成循环调用；
- 可能不容易观察运行时的特征，有碍于除错。