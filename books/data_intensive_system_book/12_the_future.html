
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Compute Science Blog">
      
      
        <meta name="author" content="LiuZhiqiang(刘志强）">
      
      
        <link rel="canonical" href="https://xliuqq.github.io/csblog/books/data_intensive_system_book/12_the_future.html">
      
      
        <link rel="prev" href="11_streaming_processing.html">
      
      
        <link rel="next" href="../../code_guide/design_principle.html">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.20">
    
    
      
        <title>第十二章：数据系统的未来 - XLiu CS Blog</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.e53b48f4.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#_1" class="md-skip">
          跳转至
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="页眉">
    <a href="../.." title="XLiu CS Blog" class="md-header__button md-logo" aria-label="XLiu CS Blog" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            XLiu CS Blog
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              第十二章：数据系统的未来
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="搜索" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="查找">
        
        <button type="reset" class="md-search__icon md-icon" title="清空当前内容" aria-label="清空当前内容" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            正在初始化搜索引擎
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/xliuqq/csblog" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    xliuqq/csblog
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="标签" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../index.html" class="md-tabs__link">
          
  
  
    
  
  博客

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../cloud/index.html" class="md-tabs__link">
          
  
  
    
  
  云原生

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../index.html" class="md-tabs__link">
          
  
  
    
  
  书籍

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../code_guide/design_principle.html" class="md-tabs__link">
          
  
  
    
  
  编程指南

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      
  
  
  
  
    
    
      
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../languages/java/native/index.html" class="md-tabs__link">
          
  
  
    
  
  编程语言

        </a>
      </li>
    
  

    
  

    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../linux/basic.html" class="md-tabs__link">
          
  
  
    
  
  linux

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../web_backend/index.html" class="md-tabs__link">
          
  
  
    
  
  Web后端开发

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../cs/cs_basic.html" class="md-tabs__link">
          
  
  
    
  
  CS基础

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../courses/os_lab/index.html" class="md-tabs__link">
          
  
  
    
  
  课程

        </a>
      </li>
    
  

    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../paper/go_concurrency_bugs.html" class="md-tabs__link">
          
  
  
    
  
  论文

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="导航栏" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="XLiu CS Blog" class="md-nav__button md-logo" aria-label="XLiu CS Blog" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    XLiu CS Blog
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/xliuqq/csblog" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    xliuqq/csblog
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../index.html" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    博客
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_1" id="__nav_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            博客
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tags.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    标签
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_3" >
        
          
          <label class="md-nav__link" for="__nav_1_3" id="__nav_1_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    归档
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_3">
            <span class="md-nav__icon md-icon"></span>
            归档
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../archive/2024.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2024
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../archive/2023.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2023
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_4" >
        
          
          <label class="md-nav__link" for="__nav_1_4" id="__nav_1_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    分类
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_4">
            <span class="md-nav__icon md-icon"></span>
            分类
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../category/hdfs.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    HDFS
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../category/k8s.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    K8s
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../category/yarn.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Yarn
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../category/devops.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    devops
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../category/helm.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    helm
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../category/maven.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    maven
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../category/spark.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    spark
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../category/%E5%B9%B6%E5%8F%91.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    并发
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../cloud/index.html" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    云原生
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2" id="__nav_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            云原生
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../cloud/virtualize/index.html" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    虚拟化
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            虚拟化
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cloud/virtualize/lxcfs.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    proc虚拟化和共享
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cloud/virtualize/gpu.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    gpu虚拟化
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2_4" >
        
          
          <label class="md-nav__link" for="__nav_2_2_4" id="__nav_2_2_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    moby(docker)
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_2_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2_4">
            <span class="md-nav__icon md-icon"></span>
            moby(docker)
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cloud/virtualize/docker.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    基础
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cloud/virtualize/docker_deploy.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    部署配置
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cloud/virtualize/docker_cmds.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    使用
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cloud/virtualize/containerd.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    containerd
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3" >
        
          
          <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    k8s
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            k8s
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_1" >
        
          
          <label class="md-nav__link" for="__nav_2_3_1" id="__nav_2_3_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    架构与组件
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_3_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_1">
            <span class="md-nav__icon md-icon"></span>
            架构与组件
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cloud/k8s/k8s.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    概述
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cloud/k8s/kubelet.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    kubelet
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cloud/k8s/k8s_object.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    对象定义
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cloud/k8s/k8s_resource.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    内置资源对象
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cloud/k8s/pod_inplace_upgrade.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    pod原地升级
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cloud/k8s/config.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    常用配置
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cloud/k8s/cmds.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    命令使用
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cloud/k8s/go_client.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    goclient
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cloud/k8s/ui_manager.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    UI和管理
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cloud/k8s/log_arch.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    日志架构
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cloud/k8s/k8s_security.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    安全机制
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_11" >
        
          
          <label class="md-nav__link" for="__nav_2_3_11" id="__nav_2_3_11_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    资源调度
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_3_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_11">
            <span class="md-nav__icon md-icon"></span>
            资源调度
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cloud/k8s/scheduler.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    调度策略
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cloud/k8s/scheduler_plugin.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    调度策略
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_12" >
        
          
          <label class="md-nav__link" for="__nav_2_3_12" id="__nav_2_3_12_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    CRD
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_3_12_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_12">
            <span class="md-nav__icon md-icon"></span>
            CRD
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cloud/k8s/crd_index.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    概述
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cloud/k8s/crd_kubebuilder.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    kubebuilder
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cloud/k8s/crd_java.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    JavaOperator
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cloud/k8s/metrics.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    指标监控
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cloud/k8s/device_plugin.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    设备插件
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cloud/k8s/garbage_collect.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    垃圾回收
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cloud/k8s/webhook.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Wehhook
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cloud/k8s/network.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    网络模型
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cloud/k8s/extend_csi.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    存储模型
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_19" >
        
          
          <label class="md-nav__link" for="__nav_2_3_19" id="__nav_2_3_19_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    安装部署
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_3_19_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_19">
            <span class="md-nav__icon md-icon"></span>
            安装部署
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cloud/k8s/deploy.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    部署流程
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cloud/k8s/deploy_storage.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    存储部署
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cloud/k8s/notes.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    生产注意事项
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cloud/k8s/release_compare.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    可选发行版
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cloud/helm.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    包管理Helm
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cloud/habor.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    镜像仓库Habor
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_6" >
        
          
          <label class="md-nav__link" for="__nav_2_6" id="__nav_2_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    无服务化
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_6">
            <span class="md-nav__icon md-icon"></span>
            无服务化
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cloud/serverless/serverless.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    概述
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cloud/serverless/knative.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    knative
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cloud/serverless/openfaas.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    openfaas
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_7" >
        
          
          <label class="md-nav__link" for="__nav_2_7" id="__nav_2_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    常用镜像
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_7">
            <span class="md-nav__icon md-icon"></span>
            常用镜像
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cloud/images/images.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    常用镜像
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cloud/images/web_centos.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    浏览器centos
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cloud/tools.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    镜像工具
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_9" >
        
          
          <label class="md-nav__link" for="__nav_2_9" id="__nav_2_9_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    云边系统
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_9">
            <span class="md-nav__icon md-icon"></span>
            云边系统
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cloud/cloud_edge/mqtt.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    mqtt协议
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cloud/cloud_edge/openyurt.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    openyurt
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cloud/cloud_edge/kubeedge.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    kubeedge
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_10" >
        
          
          <label class="md-nav__link" for="__nav_2_10" id="__nav_2_10_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    项目
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_10">
            <span class="md-nav__icon md-icon"></span>
            项目
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cloud/projects/HAMi.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    vGPU HAMI
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cloud/projects/fluid.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    数据编排Fluid
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cloud/projects/istio.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    流量编排Istio
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cloud/projects/kubevela.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    应用交付KubeVela
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../index.html" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    书籍
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3" id="__nav_3_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            书籍
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="index.html" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    数据密集型系统设计
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            数据密集型系统设计
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="1_data_system_basic.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    可靠、可扩展、可维护的应用系统
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="2_data_model_query_language.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    数据模型和查询语言
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="3_data_store_and_search.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    数据存储与检索
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="4_encoding_and_evolution.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    编码与演化
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="part2_distributed_data.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    第二部分：分布式数据
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="5_replication.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    复制
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="6_partitions.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    分区
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="7_transaction.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    事务
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="8_trouble_in_distributed_system.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    分布式系统的麻烦
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="9_consistency_consensus.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    一致性与共识
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="part3_derived_data.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    第三部分：衍生数据
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="10_batch_processing.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    第十章：批处理
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="11_streaming_processing.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    第十一章：流处理
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    第十二章：数据系统的未来
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="12_the_future.html" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    第十二章：数据系统的未来
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      数据集成
    </span>
  </a>
  
    <nav class="md-nav" aria-label="数据集成">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      组合使用衍生数据的工具
    </span>
  </a>
  
    <nav class="md-nav" aria-label="组合使用衍生数据的工具">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      理解数据流
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      衍生数据与分布式事务
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      全序的限制
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      排序事件以捕获因果关系
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      批处理与流处理
    </span>
  </a>
  
    <nav class="md-nav" aria-label="批处理与流处理">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      维护衍生状态
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    <span class="md-ellipsis">
      应用演化后重新处理数据
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lambda" class="md-nav__link">
    <span class="md-ellipsis">
      Lambda架构
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    <span class="md-ellipsis">
      统一批处理和流处理
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    <span class="md-ellipsis">
      分拆数据库
    </span>
  </a>
  
    <nav class="md-nav" aria-label="分拆数据库">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    <span class="md-ellipsis">
      组合使用数据存储技术
    </span>
  </a>
  
    <nav class="md-nav" aria-label="组合使用数据存储技术">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    <span class="md-ellipsis">
      创建索引
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    <span class="md-ellipsis">
      一切的元数据库
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_16" class="md-nav__link">
    <span class="md-ellipsis">
      开展分拆工作
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vs" class="md-nav__link">
    <span class="md-ellipsis">
      分拆系统vs集成系统
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_17" class="md-nav__link">
    <span class="md-ellipsis">
      少了什么？
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_18" class="md-nav__link">
    <span class="md-ellipsis">
      围绕数据流设计应用
    </span>
  </a>
  
    <nav class="md-nav" aria-label="围绕数据流设计应用">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_19" class="md-nav__link">
    <span class="md-ellipsis">
      应用代码作为衍生函数
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_20" class="md-nav__link">
    <span class="md-ellipsis">
      应用代码和状态的分离
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_21" class="md-nav__link">
    <span class="md-ellipsis">
      数据流：应用代码与状态变化的交互
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_22" class="md-nav__link">
    <span class="md-ellipsis">
      流处理器和服务
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_23" class="md-nav__link">
    <span class="md-ellipsis">
      观察衍生数据状态
    </span>
  </a>
  
    <nav class="md-nav" aria-label="观察衍生数据状态">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_24" class="md-nav__link">
    <span class="md-ellipsis">
      物化视图和缓存
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_25" class="md-nav__link">
    <span class="md-ellipsis">
      有状态、可离线的客户端
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_26" class="md-nav__link">
    <span class="md-ellipsis">
      将状态变更推送给客户端
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_27" class="md-nav__link">
    <span class="md-ellipsis">
      端到端的事件流
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_28" class="md-nav__link">
    <span class="md-ellipsis">
      读也是事件
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_29" class="md-nav__link">
    <span class="md-ellipsis">
      多分区数据处理
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_30" class="md-nav__link">
    <span class="md-ellipsis">
      将事情做正确
    </span>
  </a>
  
    <nav class="md-nav" aria-label="将事情做正确">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_31" class="md-nav__link">
    <span class="md-ellipsis">
      数据库的端到端原则
    </span>
  </a>
  
    <nav class="md-nav" aria-label="数据库的端到端原则">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_32" class="md-nav__link">
    <span class="md-ellipsis">
      正好执行一次操作
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_33" class="md-nav__link">
    <span class="md-ellipsis">
      抑制重复
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_34" class="md-nav__link">
    <span class="md-ellipsis">
      操作标识符
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_35" class="md-nav__link">
    <span class="md-ellipsis">
      端到端原则
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_36" class="md-nav__link">
    <span class="md-ellipsis">
      在数据系统中应用端到端思考
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_37" class="md-nav__link">
    <span class="md-ellipsis">
      强制约束
    </span>
  </a>
  
    <nav class="md-nav" aria-label="强制约束">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_38" class="md-nav__link">
    <span class="md-ellipsis">
      唯一性约束需要达成共识
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_39" class="md-nav__link">
    <span class="md-ellipsis">
      基于日志消息传递中的唯一性
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_40" class="md-nav__link">
    <span class="md-ellipsis">
      多分区请求处理
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_41" class="md-nav__link">
    <span class="md-ellipsis">
      及时性与完整性
    </span>
  </a>
  
    <nav class="md-nav" aria-label="及时性与完整性">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_42" class="md-nav__link">
    <span class="md-ellipsis">
      数据流系统的正确性
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_43" class="md-nav__link">
    <span class="md-ellipsis">
      宽松地解释约束
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_44" class="md-nav__link">
    <span class="md-ellipsis">
      无协调数据系统
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_45" class="md-nav__link">
    <span class="md-ellipsis">
      信任但验证
    </span>
  </a>
  
    <nav class="md-nav" aria-label="信任但验证">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#bug" class="md-nav__link">
    <span class="md-ellipsis">
      维护完整性，尽管软件有Bug
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_46" class="md-nav__link">
    <span class="md-ellipsis">
      不要盲目信任承诺
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_47" class="md-nav__link">
    <span class="md-ellipsis">
      验证的文化
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_48" class="md-nav__link">
    <span class="md-ellipsis">
      为可审计性而设计
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_49" class="md-nav__link">
    <span class="md-ellipsis">
      端到端原则重现
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_50" class="md-nav__link">
    <span class="md-ellipsis">
      用于可审计数据系统的工具
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_51" class="md-nav__link">
    <span class="md-ellipsis">
      做正确的事情
    </span>
  </a>
  
    <nav class="md-nav" aria-label="做正确的事情">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_52" class="md-nav__link">
    <span class="md-ellipsis">
      预测性分析
    </span>
  </a>
  
    <nav class="md-nav" aria-label="预测性分析">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_53" class="md-nav__link">
    <span class="md-ellipsis">
      偏见与歧视
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_54" class="md-nav__link">
    <span class="md-ellipsis">
      责任与问责
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_55" class="md-nav__link">
    <span class="md-ellipsis">
      反馈循环
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_56" class="md-nav__link">
    <span class="md-ellipsis">
      隐私和追踪
    </span>
  </a>
  
    <nav class="md-nav" aria-label="隐私和追踪">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_57" class="md-nav__link">
    <span class="md-ellipsis">
      监视
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_58" class="md-nav__link">
    <span class="md-ellipsis">
      同意与选择的自由
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_59" class="md-nav__link">
    <span class="md-ellipsis">
      隐私与数据使用
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_60" class="md-nav__link">
    <span class="md-ellipsis">
      数据资产与权力
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_61" class="md-nav__link">
    <span class="md-ellipsis">
      回顾工业革命
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_62" class="md-nav__link">
    <span class="md-ellipsis">
      立法与自律
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_63" class="md-nav__link">
    <span class="md-ellipsis">
      本章小结
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_64" class="md-nav__link">
    <span class="md-ellipsis">
      参考文献
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    编程指南
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            编程指南
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../code_guide/design_principle.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    设计原则
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../code_guide/design_pattern/index.html" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    设计模式
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            设计模式
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2_2" >
        
          
          <label class="md-nav__link" for="__nav_4_2_2" id="__nav_4_2_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    创建型模式
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2_2">
            <span class="md-nav__icon md-icon"></span>
            创建型模式
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../code_guide/design_pattern/factory.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    工厂模式
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../code_guide/design_pattern/abstract_factory.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    抽象工厂
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../code_guide/design_pattern/singleton.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    单例
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../code_guide/design_pattern/builder.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    构造者模式
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../code_guide/design_pattern/prototype.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    原型模式
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2_3" >
        
          
          <label class="md-nav__link" for="__nav_4_2_3" id="__nav_4_2_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    结构型模式
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2_3">
            <span class="md-nav__icon md-icon"></span>
            结构型模式
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../code_guide/design_pattern/adapter.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    适配器模式
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../code_guide/design_pattern/bridge.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    桥接模式
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../code_guide/design_pattern/composite.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    组合模式
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../code_guide/design_pattern/decorator.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    装饰模式
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../code_guide/design_pattern/facade.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    外观模式
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../code_guide/design_pattern/flyweight.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    享元模式
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../code_guide/design_pattern/proxy.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    代理模式
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2_4" >
        
          
          <label class="md-nav__link" for="__nav_4_2_4" id="__nav_4_2_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    行为型模式
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_2_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2_4">
            <span class="md-nav__icon md-icon"></span>
            行为型模式
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../code_guide/design_pattern/chain.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    职责链模式
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../code_guide/design_pattern/command.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    命令模式
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../code_guide/design_pattern/interpret.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    解释器模式
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../code_guide/design_pattern/iterator.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    迭代器模式
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../code_guide/design_pattern/medium.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    中介者模式
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../code_guide/design_pattern/memento.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    备忘录模式
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../code_guide/design_pattern/observer.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    观察者模式
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../code_guide/design_pattern/state.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    状态模式
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../code_guide/design_pattern/strategy.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    策略模式
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../code_guide/design_pattern/template.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    模板方法
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../code_guide/design_pattern/visitor.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    访问者模式
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../code_guide/design_pattern/container_distributed.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    分布式应用设计模式
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../code_guide/clean_code.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    整洁代码
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_4" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../code_guide/algs/index.html" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    算法
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_4" id="__nav_4_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_4">
            <span class="md-nav__icon md-icon"></span>
            算法
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../code_guide/algs/hash.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    散列算法
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../code_guide/algs/bloom_filter.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    布隆过滤器
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_5" >
        
          
          <label class="md-nav__link" for="__nav_4_5" id="__nav_4_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    数据结构
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_5">
            <span class="md-nav__icon md-icon"></span>
            数据结构
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../code_guide/data_structure/array.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    数组
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../code_guide/data_structure/list.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    链表
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../code_guide/data_structure/queue.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    队列
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../code_guide/data_structure/hashmap.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Hash表
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../code_guide/data_structure/tree.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    树
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    编程语言
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            编程语言
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_1" >
        
          
          <label class="md-nav__link" for="__nav_5_1" id="__nav_5_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Java
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_1">
            <span class="md-nav__icon md-icon"></span>
            Java
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_1_1" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../languages/java/native/index.html" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Native
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5_1_1" id="__nav_5_1_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_1_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_1_1">
            <span class="md-nav__icon md-icon"></span>
            Native
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_1_1_2" >
        
          
          <label class="md-nav__link" for="__nav_5_1_1_2" id="__nav_5_1_1_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    JNI
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_5_1_1_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_1_1_2">
            <span class="md-nav__icon md-icon"></span>
            JNI
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../languages/java/native/jni.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    原理
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../languages/java/native/jni_demo.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    示例
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../languages/java/native/jnr.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    JNR
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_2" >
        
          
          <label class="md-nav__link" for="__nav_5_2" id="__nav_5_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    C和C++
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2">
            <span class="md-nav__icon md-icon"></span>
            C和C++
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../languages/ccpp/basic.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    基础
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../languages/ccpp/class.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    类
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../languages/ccpp/concurrency.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    并发
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../languages/ccpp/debug.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    调试
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../languages/ccpp/call_python.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CallPython
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../languages/ccpp/abi.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ABI
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../languages/ccpp/gcc.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    gcc
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../languages/ccpp/make.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    make
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../languages/libffi.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ffi
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../languages/unicode.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    unicode
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../languages/ziju.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    语言自举
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    linux
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            linux
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../linux/basic.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    基础
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../linux/shell_programming.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    shell编程
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../linux/tuning.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    性能调试命令
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../linux/bash.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    bash
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../linux/chmod.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    chmod
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../linux/chroot.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    chroot
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../linux/binutils.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    gnu工具
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../linux/firewall.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    防火墙
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../linux/namespace.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    名空间
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../linux/cgroup.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    cgroup
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../linux/limit_process.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    进程的限制
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../linux/systemctl.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    systemctl
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../linux/log_and_rotate.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    日志管理
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../linux/process_snapshot.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    进程快照
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../linux/acls.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    acls
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../linux/network.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    网络
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../linux/fs.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    文件系统
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../linux/zero_copy.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    零拷贝
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../linux/yum.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    源配置
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../web_backend/index.html" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Web后端开发
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_7" id="__nav_7_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            Web后端开发
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../web_backend/aop_java.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    切面编程(Java)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../web_backend/cache.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    缓存
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    CS基础
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            CS基础
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cs/cs_basic.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    基础
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cs/cs_os.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    操作系统
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_3" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../cs/network/index.html" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    网络
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_8_3" id="__nav_8_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_8_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8_3">
            <span class="md-nav__icon md-icon"></span>
            网络
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cs/network/network.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    网络层协议
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cs/network/trans_protocols.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    传输层协议
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cs/network/http.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    HTTP
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cs/network/intranet_penetration.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    内网穿透
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cs/network/LVS.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    LVS
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9" >
        
          
          <label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    课程
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            课程
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_1" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../courses/os_lab/index.html" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    操作系统设计与实现(2023)
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_9_1" id="__nav_9_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_9_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9_1">
            <span class="md-nav__icon md-icon"></span>
            操作系统设计与实现(2023)
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../courses/os_lab/01-os_introduction.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    1.操作系统概述
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../courses/os_lab/02-os_appview.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2.应用视角的操作系统
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../courses/os_lab/03-os_hardware_view.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3.硬件视角的操作系统
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../courses/os_lab/04-os_python_modeling.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    4.Python 建模操作系统
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../courses/os_lab/05_multi_cpu_programming.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    5.多处理器编程：从入门到放弃
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../courses/os_lab/06_concurrent_control_basic.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    6.应用视角的操作系统
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../courses/os_lab/07_concurrent_control_mutex.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    7.并发控制：互斥
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../courses/os_lab/08_debug_and_action.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    8.调试理论与实践
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../courses/os_lab/09_sync_condition.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    9.并发控制：同步（条件变量）
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../courses/os_lab/10_sync_semphore.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    10.并发控制：同步（信号量）
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../courses/os_lab/11_concurrent_in_real_world.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    11.真实世界的并发编程
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../courses/os_lab/12_concurrent_bug_category.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    12.并发BUG分类
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../courses/os_lab/13_concurrent_bug_defense.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    13.并发 Bug 的应对
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../courses/os_lab/14_multi_cpu_and_interrupt.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    14.多处理器系统与中断机制
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../courses/os_lab/15_kernel_thread_and_process.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    15.操作系统上的进程
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../courses/os_lab/16_application_in_linux.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    16.Linux 操作系统
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../courses/os_lab/17_hack_linux_process_address.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    17.Linux 进程的地址空间
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../courses/os_lab/18_os_lab_live_guide.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    18.操作系统实验生存指南
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../courses/os_lab/19_system_call_and_shell.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    19.系统调用和 UNIX Shell
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../courses/os_lab/20-c_standard_lib.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    20.C标准库和实现
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../courses/os_lab/21-22-executable_files_loading.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    21-22.可执行文件与加载
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../courses/os_lab/23_application_of_state_machine.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    23.状态机模型的应用
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../courses/os_lab/24_impletation_of_os_process.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    24.操作系统进程的实现
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../courses/os_lab/25_store_device.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    25.存储设备原理
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../courses/os_lab/26_input_output_device.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    26.输入输出设备
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../courses/os_lab/27_device_driver_and_filesystem.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    27.设备驱动程序与文件系统
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../courses/os_lab/28_FAT_UNIX_filesystem.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    28.FAT 和 UNIX 文件系统
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../courses/os_lab/29_available_durable_data.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    29.持久数据的可靠性
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../courses/os_lab/30_summarize.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    30.课程总结
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10" >
        
          
          <label class="md-nav__link" for="__nav_10" id="__nav_10_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    论文
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10">
            <span class="md-nav__icon md-icon"></span>
            论文
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../paper/go_concurrency_bugs.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    go并发bugs
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../paper/job_scheduling_in_hpc.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    HPC中的作业调度
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../paper/scalability_but_at_what_cost.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    可扩展性的代价
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      数据集成
    </span>
  </a>
  
    <nav class="md-nav" aria-label="数据集成">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      组合使用衍生数据的工具
    </span>
  </a>
  
    <nav class="md-nav" aria-label="组合使用衍生数据的工具">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      理解数据流
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      衍生数据与分布式事务
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      全序的限制
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      排序事件以捕获因果关系
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      批处理与流处理
    </span>
  </a>
  
    <nav class="md-nav" aria-label="批处理与流处理">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      维护衍生状态
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    <span class="md-ellipsis">
      应用演化后重新处理数据
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lambda" class="md-nav__link">
    <span class="md-ellipsis">
      Lambda架构
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    <span class="md-ellipsis">
      统一批处理和流处理
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    <span class="md-ellipsis">
      分拆数据库
    </span>
  </a>
  
    <nav class="md-nav" aria-label="分拆数据库">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    <span class="md-ellipsis">
      组合使用数据存储技术
    </span>
  </a>
  
    <nav class="md-nav" aria-label="组合使用数据存储技术">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    <span class="md-ellipsis">
      创建索引
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    <span class="md-ellipsis">
      一切的元数据库
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_16" class="md-nav__link">
    <span class="md-ellipsis">
      开展分拆工作
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vs" class="md-nav__link">
    <span class="md-ellipsis">
      分拆系统vs集成系统
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_17" class="md-nav__link">
    <span class="md-ellipsis">
      少了什么？
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_18" class="md-nav__link">
    <span class="md-ellipsis">
      围绕数据流设计应用
    </span>
  </a>
  
    <nav class="md-nav" aria-label="围绕数据流设计应用">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_19" class="md-nav__link">
    <span class="md-ellipsis">
      应用代码作为衍生函数
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_20" class="md-nav__link">
    <span class="md-ellipsis">
      应用代码和状态的分离
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_21" class="md-nav__link">
    <span class="md-ellipsis">
      数据流：应用代码与状态变化的交互
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_22" class="md-nav__link">
    <span class="md-ellipsis">
      流处理器和服务
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_23" class="md-nav__link">
    <span class="md-ellipsis">
      观察衍生数据状态
    </span>
  </a>
  
    <nav class="md-nav" aria-label="观察衍生数据状态">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_24" class="md-nav__link">
    <span class="md-ellipsis">
      物化视图和缓存
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_25" class="md-nav__link">
    <span class="md-ellipsis">
      有状态、可离线的客户端
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_26" class="md-nav__link">
    <span class="md-ellipsis">
      将状态变更推送给客户端
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_27" class="md-nav__link">
    <span class="md-ellipsis">
      端到端的事件流
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_28" class="md-nav__link">
    <span class="md-ellipsis">
      读也是事件
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_29" class="md-nav__link">
    <span class="md-ellipsis">
      多分区数据处理
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_30" class="md-nav__link">
    <span class="md-ellipsis">
      将事情做正确
    </span>
  </a>
  
    <nav class="md-nav" aria-label="将事情做正确">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_31" class="md-nav__link">
    <span class="md-ellipsis">
      数据库的端到端原则
    </span>
  </a>
  
    <nav class="md-nav" aria-label="数据库的端到端原则">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_32" class="md-nav__link">
    <span class="md-ellipsis">
      正好执行一次操作
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_33" class="md-nav__link">
    <span class="md-ellipsis">
      抑制重复
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_34" class="md-nav__link">
    <span class="md-ellipsis">
      操作标识符
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_35" class="md-nav__link">
    <span class="md-ellipsis">
      端到端原则
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_36" class="md-nav__link">
    <span class="md-ellipsis">
      在数据系统中应用端到端思考
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_37" class="md-nav__link">
    <span class="md-ellipsis">
      强制约束
    </span>
  </a>
  
    <nav class="md-nav" aria-label="强制约束">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_38" class="md-nav__link">
    <span class="md-ellipsis">
      唯一性约束需要达成共识
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_39" class="md-nav__link">
    <span class="md-ellipsis">
      基于日志消息传递中的唯一性
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_40" class="md-nav__link">
    <span class="md-ellipsis">
      多分区请求处理
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_41" class="md-nav__link">
    <span class="md-ellipsis">
      及时性与完整性
    </span>
  </a>
  
    <nav class="md-nav" aria-label="及时性与完整性">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_42" class="md-nav__link">
    <span class="md-ellipsis">
      数据流系统的正确性
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_43" class="md-nav__link">
    <span class="md-ellipsis">
      宽松地解释约束
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_44" class="md-nav__link">
    <span class="md-ellipsis">
      无协调数据系统
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_45" class="md-nav__link">
    <span class="md-ellipsis">
      信任但验证
    </span>
  </a>
  
    <nav class="md-nav" aria-label="信任但验证">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#bug" class="md-nav__link">
    <span class="md-ellipsis">
      维护完整性，尽管软件有Bug
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_46" class="md-nav__link">
    <span class="md-ellipsis">
      不要盲目信任承诺
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_47" class="md-nav__link">
    <span class="md-ellipsis">
      验证的文化
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_48" class="md-nav__link">
    <span class="md-ellipsis">
      为可审计性而设计
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_49" class="md-nav__link">
    <span class="md-ellipsis">
      端到端原则重现
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_50" class="md-nav__link">
    <span class="md-ellipsis">
      用于可审计数据系统的工具
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_51" class="md-nav__link">
    <span class="md-ellipsis">
      做正确的事情
    </span>
  </a>
  
    <nav class="md-nav" aria-label="做正确的事情">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_52" class="md-nav__link">
    <span class="md-ellipsis">
      预测性分析
    </span>
  </a>
  
    <nav class="md-nav" aria-label="预测性分析">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_53" class="md-nav__link">
    <span class="md-ellipsis">
      偏见与歧视
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_54" class="md-nav__link">
    <span class="md-ellipsis">
      责任与问责
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_55" class="md-nav__link">
    <span class="md-ellipsis">
      反馈循环
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_56" class="md-nav__link">
    <span class="md-ellipsis">
      隐私和追踪
    </span>
  </a>
  
    <nav class="md-nav" aria-label="隐私和追踪">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_57" class="md-nav__link">
    <span class="md-ellipsis">
      监视
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_58" class="md-nav__link">
    <span class="md-ellipsis">
      同意与选择的自由
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_59" class="md-nav__link">
    <span class="md-ellipsis">
      隐私与数据使用
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_60" class="md-nav__link">
    <span class="md-ellipsis">
      数据资产与权力
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_61" class="md-nav__link">
    <span class="md-ellipsis">
      回顾工业革命
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_62" class="md-nav__link">
    <span class="md-ellipsis">
      立法与自律
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_63" class="md-nav__link">
    <span class="md-ellipsis">
      本章小结
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_64" class="md-nav__link">
    <span class="md-ellipsis">
      参考文献
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="_1">第十二章：数据系统的未来</h1>
<h2 id="_2">数据集成</h2>
<p>如果你有一个类似于 “我想存储一些数据并稍后再查询” 的问题，那么并没有一种正确的解决方案。但对于不同的具体环境，总会有不同的合适方法。使单条代码路径能做到稳定健壮且表现良好已经是一件非常困难的事情了 —— <strong>尝试在单个软件中完成所有事情，几乎可以保证，实现效果会很差</strong>。</p>
<p>因此软件工具的最佳选择也取决于情况。每一种软件，甚至所谓的 “通用” 数据库，都是针对特定的使用模式设计的。</p>
<p>面对让人眼花缭乱的诸多替代品，第一个挑战就是弄清软件与其适用环境的映射关系。供应商不愿告诉你他们软件不适用的工作负载。还有一个挑战：在复杂的应用中，数据的用法通常花样百出。不太可能存在适用于 <strong>所有</strong> 不同数据应用场景的软件，因此你不可避免地需要<strong>拼凑几个不同的软件来以提供应用所需的功能</strong>。</p>
<h3 id="_3">组合使用衍生数据的工具</h3>
<p>例如，为了处理任意关键词的搜索查询，将 OLTP 数据库与全文搜索索引集成在一起是很常见的需求。</p>
<ul>
<li>简单的应用，一些数据库（例如 PostgreSQL）包含了全文索引功能，完全够用【1】；更复杂的搜索能力就需要专业的信息检索工具。</li>
<li>相反的是，搜索索引通常不适合作为持久的记录系统，因此许多应用需要组合这两种不同的工具以满足所有需求。</li>
</ul>
<p>随着数据不同表示形式的增加，集成问题变得越来越困难。</p>
<ul>
<li>除了数据库和搜索索引之外，也许你需要在分析系统（数据仓库，或批处理和流处理系统）中维护数据副本；</li>
<li>维护从原始数据中衍生的缓存，或反规范化的数据版本；将数据灌入机器学习、分类、排名或推荐系统中；或者基于数据变更发送通知。</li>
</ul>
<p>经常看到软件工程师做出这样的陈述：“根据我的经验，99% 的人只需要 X” 或者 “...... 不需要 X”（对于各种各样的 X）。</p>
<ul>
<li>我认为这种陈述更像是发言人自己的经验，而不是技术实际上的实用性。</li>
<li>某人认为鸡肋而毫无意义的功能可能是别人的核心需求。当你拉高视角，并考虑跨越整个组织范围的数据流时，数据集成的需求往往就会变得明显起来。</li>
</ul>
<h4 id="_4">理解数据流</h4>
<p>当需要在多个存储系统中维护相同数据的副本以满足不同的访问模式时，你要对输入和输出了如指掌：哪些数据先写入，哪些数据表示衍生自哪些来源？如何以正确的格式，将所有数据导入正确的地方？</p>
<p>写入数据库是向该系统提供新输入的唯一方式。</p>
<ul>
<li>例如，你可能会首先将数据写入 <strong>记录系统</strong> 数据库，捕获对该数据库所做的变更，然后将变更以相同的顺序应用于搜索索引。</li>
<li>如果变更数据捕获（CDC）是更新索引的唯一方式，则可以确定该索引完全派生自记录系统，因此与其保持一致（除软件错误外）。</li>
</ul>
<p>允许应用程序直接写入搜索索引和数据库引入如 <a href="pics/fig11-4.png">图 11-4</a> 所示的问题，进入彼此间持久性的不一致状态。</p>
<p>如果你可以通过单个系统来提供所有用户输入，从而决定所有写入的排序，则通过按相同顺序处理写入，可以更容易地衍生出其他数据表示。这是状态机复制方法的一个应用。</p>
<ul>
<li>无论你使用变更数据捕获还是事件溯源日志，都不如简单的基于全序的决策原则更重要。</li>
</ul>
<p>基于事件日志来更新衍生数据的系统，通常可以做到 <strong>确定性</strong> 与 <strong>幂等性</strong>，使得从故障中恢复相当容易。</p>
<h4 id="_5">衍生数据与分布式事务</h4>
<p>保持不同数据系统彼此一致的经典方法涉及分布式事务，与分布式事务相比，使用衍生数据系统的方法如何？</p>
<ul>
<li>分布式事务通过 <strong>锁</strong> 进行互斥来决定写入的顺序，使用原子提交来确保变更只生效一次；</li>
<li>CDC 和事件溯源使用日志进行排序，基于 <strong>确定性重试</strong> 和 <strong>幂等性</strong>确保变更只生效一次；</li>
</ul>
<p>最大的不同之处在于<strong>事务系统通常提供线性一致性</strong>，这包含着有用的保证，例如<strong>读己之写</strong>。另一方面，<strong>衍生数据系统</strong>通常是异步更新的，因此它们默认<strong>不会提供相同的时序保证</strong>。</p>
<p>在没有广泛支持的良好分布式事务协议的情况下，我认为基于日志的衍生数据是集成不同数据系统的最有前途的方法。</p>
<ul>
<li>XA 的容错能力和性能很差劲（请参阅 “<a href="9_consistency_consensus.html#实践中的分布式事务">实践中的分布式事务</a>”），严重限制了它的实用性。</li>
<li>为分布式事务设计一种更好的协议是可行的，但被现有工具广泛接受是很有挑战的，且不是立竿见影的事。</li>
</ul>
<p>诸如读己之写的保证是有用的，我认为告诉所有人 “最终一致性是不可避免的 —— 忍一忍并学会和它打交道” 是没有什么建设性的（至少在缺乏 <strong>如何</strong> 应对的良好指导时）。</p>
<p>在 “<a href="#将事情做正确">将事情做正确</a>” 中，我们将讨论一些在异步衍生系统之上实现更强保障的方法，并迈向分布式事务和基于日志的异步系统之间的中间地带。</p>
<h4 id="_6">全序的限制</h4>
<p>对于足够小的系统，构建一个完全有序的事件日志是完全可行的（正如单主复制数据库的流行所证明的那样）。但是，随着系统向更大更复杂的工作负载伸缩，限制开始出现：</p>
<ul>
<li>在大多数情况下，构建完全有序的日志，需要所有事件汇集于决定顺序的 <strong>单个领导者节点</strong>。如果事件吞吐量大于单台计算机的处理能力，则需要将其分区到多台计算机上。然后两个不同分区中的事件顺序关系就不明确。</li>
<li>如果服务器分布在多个 <strong>地理位置分散</strong> 的数据中心，为了容忍整个数据中心掉线，你通常在每个数据中心都有单独的主库，因为网络延迟会导致同步的跨数据中心协调效率低下。意味着源自两个不同数据中心的事件顺序未定义。</li>
<li>将应用程序部署为微服务时，常见的设计选择是将每个服务及其持久状态作为独立单元进行部署，服务之间不共享持久状态。当两个事件来自不同的服务时，这些事件间的顺序未定义。</li>
<li>某些应用程序在客户端保存状态，该状态在用户输入时立即更新（无需等待服务器确认），甚至可以继续脱机工作。对于这样的应用程序，客户端和服务器很可能以不同的顺序看到事件。</li>
</ul>
<p>在形式上，决定事件的全局顺序称为 <strong>全序广播</strong>，相当于 <strong>共识</strong>。大多数共识算法都是针对单个节点的吞吐量足以处理整个事件流的情况而设计的，并且这些算法不提供多个节点共享事件排序工作的机制。设计可以伸缩至单个节点的吞吐量之上，且在地理位置分散的环境中仍然工作良好的的共识算法仍然是一个开放的研究问题。</p>
<h4 id="_7">排序事件以捕获因果关系</h4>
<p>在事件之间不存在因果关系的情况下，全序的缺乏并不是一个大问题，因为并发事件可以任意排序。例如，当同一对象有多个更新时，它们可以通过将特定对象 ID 的所有更新路由到相同的日志分区来完全排序。然而，因果关系有时会以更微妙的方式出现。</p>
<p>例如，考虑一个社交网络服务，以及一对曾处于恋爱关系但刚分手的用户。其中一个用户将另一个用户从好友中移除，然后向剩余的好友发送消息，抱怨他们的前任。用户的心思是他们的前任不应该看到这些粗鲁的消息，因为消息是在好友状态解除后发送的。</p>
<ul>
<li>但是如果好友关系状态与消息存储在不同的地方，在这样一个系统中，可能会出现 <strong>解除好友</strong> 事件与 <strong>发送消息</strong> 事件之间的因果依赖丢失的情况。</li>
<li>如果因果依赖关系没有被捕捉到，则发送有关新消息的通知的服务可能会在 <strong>解除好友</strong> 事件之前处理 <strong>发送消息</strong> 事件，从而错误地向前任发送通知。</li>
</ul>
<p>在本例中，通知实际上是消息和好友列表之间的连接，使得它与我们先前讨论的连接的时序问题有关。不幸的是，这个问题似乎并没有一个简单的答案【2,3】：</p>
<ul>
<li>逻辑时间戳可以提供无需协调的全局顺序，因此它们可能有助于全序广播不可行的情况。但是，他们仍然要求收件人处理不按顺序发送的事件，并且需要传递其他元数据。</li>
<li>如果你可以记录一个事件来记录用户在做出决定之前所看到的系统状态，并给该事件一个唯一的标识符，那么后面的任何事件都可以引用该事件标识符来记录因果关系【4】。</li>
<li>冲突解决算法（请参阅 “<a href="5_replication.html#自动冲突解决">自动冲突解决</a>”）有助于处理以意外顺序传递的事件。它们对于维护状态很有用，但如果行为有外部副作用（例如，给用户发送通知），就没什么帮助了。</li>
</ul>
<p>也许，随着时间的推移，应用开发模式将出现，使得能够有效地捕获因果依赖关系，并且保持正确的衍生状态，而不会迫使所有事件经历全序广播的瓶颈）。</p>
<h3 id="_8">批处理与流处理</h3>
<p>数据集成的目标是，确保数据最终能在所有正确的地方表现出正确的形式。这样做需要消费输入、转换、连接、过滤、聚合、训练模型、评估、以及最终写出适当的输出。</p>
<p>批处理和流处理是实现这一目标的工具。输出是衍生数据集，例如搜索索引、物化视图、向用户显示的建议、聚合指标等。</p>
<p>Spark 在批处理引擎上执行流处理，将流分解为 <strong>微批次（microbatches）</strong>，而 Apache Flink 则在流处理引擎上执行批处理【5】。</p>
<ul>
<li>原则上，一种类型的处理可以用另一种类型来模拟，但是性能特征会有所不同：例如，在跳跃或滑动窗口上，微批次可能表现不佳【6】。</li>
</ul>
<h4 id="_9">维护衍生状态</h4>
<p>批处理有着很强的函数式风格（即使其代码不是用函数式语言编写的）：它鼓励确定性的纯函数，其输出仅依赖于输入，除了显式输出外没有副作用，将输入视作不可变的，且输出是仅追加的。流处理与之类似，但它扩展了算子以允许受管理的、容错的状态。</p>
<p>具有良好定义的输入和输出的确定性函数的原理不仅有利于容错，也简化了有关组织中数据流的推理【7】。</p>
<ul>
<li>无论衍生数据是搜索索引、统计模型还是缓存：将其视为从一个东西衍生出另一个的数据管道，通过函数式应用代码推送一个系统的状态变更，并将其效果应用至衍生系统中。</li>
</ul>
<p>原则上，衍生数据系统可以同步地维护，就像关系数据库在与索引表写入操作相同的事务中同步更新次级索引一样。然而，异步是使基于事件日志的系统稳健的原因：</p>
<ul>
<li>它允许系统的一部分故障被抑制在本地。而如果任何一个参与者失败，分布式事务将中止，因此它们倾向于通过将故障传播到系统的其余部分来放大故障。</li>
</ul>
<p>次级索引经常跨越分区边界。具有次级索引的分区系统需要将写入发送到多个分区（如果索引按关键词分区的话）或将读取发送到所有分区（如果索引是按文档分区的话）。如果索引是异步维护的，这种跨分区通信也是最可靠和最可伸缩的【8】。</p>
<h4 id="_10">应用演化后重新处理数据</h4>
<p>在维护衍生数据时，批处理和流处理都是有用的。流处理允许将输入中的变化以低延迟反映在衍生视图中，而批处理允许重新处理大量累积的历史数据以便将新视图导出到现有数据集上。</p>
<p>特别是，重新处理现有数据为维护系统、演化并支持新功能和需求变更提供了一个良好的机制：</p>
<ul>
<li>没有重新进行处理，模式演化将仅限于简单的变化，例如向记录中添加新的可选字段或添加新类型的记录（无论写时模式还是读时模式）。</li>
<li>通过重新处理，可以将数据集重组为一个完全不同的模型，以便更好地满足新的要求。</li>
</ul>
<p>衍生视图允许 <strong>渐进演化（gradual evolution）</strong>。如果你想重新构建数据集，不需要执行突然切换式的迁移。</p>
<ul>
<li>将旧架构和新架构并排维护为相同基础数据上的两个独立衍生视图。</li>
<li>将少量用户转移到新视图，以测试其性能并发现任何错误，而大多数用户仍然会被路由到旧视图。</li>
<li>逐渐地增加访问新视图的用户比例，最终可以删除旧视图【10】。</li>
</ul>
<p>这种逐渐迁移的优势是如果出现问题，每个阶段的过程都很容易逆转：你始终有一个可以回滚的可用系统。通过降低不可逆损害的风险，你能对继续前进更有信心，从而更快地改善系统【11】。</p>
<h4 id="lambda">Lambda架构</h4>
<p>Lambda 架构的核心思想是通过将不可变事件附加到不断增长的数据集来记录传入数据，这类似于事件溯源。</p>
<p>Lambda 架构建议并行运行两个不同的系统：批处理系统（如 Hadoop MapReduce）和独立的流处理系统（如 Storm）。</p>
<ul>
<li>流处理器消耗事件并快速生成对视图的近似更新；</li>
<li>批处理器稍后将使用同一组事件并生成衍生视图的更正版本。</li>
</ul>
<p>这个设计背后的原因是批处理更简单，因此不易出错，而流处理器被认为是不太可靠和难以容错的。而且，流处理可以使用快速近似算法，而批处理使用较慢的精确算法。</p>
<p>Lambda 架构是一种有影响力的想法，它将数据系统的设计变得更好，尤其是通过推广这样的原则：在不可变事件流上建立衍生视图，并在需要时重新处理事件。但是我也认为它有一些实际问题：</p>
<ul>
<li>在批处理和流处理框架中维护相同的逻辑是很显著的额外工作。</li>
<li>由于流管道和批处理管道产生独立的输出，因此需要合并它们以响应用户请求。如果计算是基于滚动窗口的简单聚合，则合并相当容易，但如果视图基于更复杂的操作（例如连接和会话化）而导出，或者输出不是时间序列，则会变得非常困难。</li>
<li>尽管有能力重新处理整个历史数据集是很好的，但在大型数据集上这样做经常会开销巨大。因此，批处理流水线通常需要设置为处理增量批处理（例如，在每小时结束时处理一小时的数据），而不是重新处理所有内容。</li>
<li>引发了 “<a href="11_streaming_processing.html#时间推理">时间推理</a>” 中讨论的问题，例如处理滞留事件和处理跨批次边界的窗口。增量化批处理计算会增加复杂性，使其更类似于流式传输层，这与保持批处理层尽可能简单的目标背道而驰。</li>
</ul>
<h4 id="_11">统一批处理和流处理</h4>
<p>最近的工作使得 Lambda 架构的优点在没有其缺点的情况下得以实现，允许批处理计算（重新处理历史数据）和流计算（在事件到达时即处理）在同一个系统中实现【15】。</p>
<p>在一个系统中统一批处理和流处理需要以下功能，这些功能也正在越来越广泛地被提供：</p>
<ul>
<li>通过处理最近事件流的相同处理引擎来重播历史事件的能力。</li>
<li>例如，基于日志的消息代理可以重播消息，某些流处理器可以从 HDFS 等分布式文件系统读取输入。</li>
<li>对于流处理器来说，恰好一次语义 —— 即确保输出与未发生故障的输出相同，即使事实上发生故障。</li>
<li>按事件时间进行窗口化的工具，而不是按处理时间进行窗口化，因为处理历史事件时，处理时间毫无意义。</li>
<li>例如，Apache Beam 提供了用于表达这种计算的 API，可以在 Apache Flink 或 Google Cloud Dataflow 使用。</li>
</ul>
<h2 id="_12">分拆数据库</h2>
<p>在最抽象的层面上，数据库，Hadoop 和操作系统都发挥相同的功能：它们存储一些数据，并允许你处理和查询这些数据【16】。其核心都是 “信息管理” 系统【17】。</p>
<ul>
<li>有很多实际的差异：许多文件系统都不能很好地处理包含 1000 万个小文件的目录，而包含 1000 万个小记录的数据库完全是寻常而不起眼的。</li>
</ul>
<p>Unix 和关系数据库以非常不同的哲学来处理信息管理问题。Unix 发展出的管道和文件只是字节序列，而数据库则发展出了 SQL 和事务。</p>
<ul>
<li>Unix 认为它的目的是为程序员提供一种相当低层次的硬件的逻辑抽象；</li>
<li>关系数据库则希望为应用程序员提供一种高层次的抽象，以隐藏磁盘上数据结构的复杂性、并发性、崩溃恢复等等。</li>
</ul>
<p>这些哲学之间的矛盾已经持续了几十年（Unix 和关系模型都出现在 70 年代初），仍然没有解决。例如，我将 NoSQL 运动解释为，希望将类 Unix 的低级别抽象方法应用于分布式 OLTP 数据存储的领域。</p>
<p>在这一部分我将试图调和这两个哲学，希望我们能各取其美。</p>
<h3 id="_13">组合使用数据存储技术</h3>
<p>本书讨论了数据库提供的各种功能及其工作原理，其中包括：</p>
<ul>
<li>次级索引，使你可以根据字段的值有效地搜索记录</li>
<li>物化视图，这是一种预计算的查询结果缓存</li>
<li>复制日志，保持其他节点上数据的副本最新</li>
<li>全文搜索索引，允许在文本中进行关键字搜索，也内置于某些关系数据库【1】</li>
</ul>
<p>数据库中内置的功能与人们用批处理和流处理器构建的衍生数据系统似乎有相似之处。</p>
<h4 id="_14">创建索引</h4>
<p>运行 <code>CREATE INDEX</code> 在关系数据库中创建一个新的索引时会发生什么。</p>
<ul>
<li>数据库必须扫描表的一致性快照，挑选出所有被索引的字段值，对它们进行排序，然后写出索引。</li>
<li>必须处理自一致快照以来所做的写入操作（假设表在创建索引时未被锁定，所以写操作可能会继续）。</li>
<li>一旦完成，只要事务写入表中，数据库就必须继续保持索引最新。</li>
</ul>
<p>此过程非常类似于设置新的从库副本，也非常类似于流处理系统中的 <strong>引导（bootstrap）</strong> 变更数据捕获。</p>
<p>无论何时运行 <code>CREATE INDEX</code>，数据库都会重新处理现有数据集，并将该索引作为新视图导出到现有数据上。现有数据可能是状态的快照，而不是所有发生变化的日志，但两者密切相关。</p>
<h4 id="_15">一切的元数据库</h4>
<p>有鉴于此，我认为整个组织的数据流开始像一个巨大的数据库【7】。每当批处理、流或 ETL 过程将数据从一个地方传输到另一个地方并组装时，它表现地就像数据库子系统一样，使索引或物化视图保持最新。</p>
<ul>
<li>从这种角度来看，批处理和流处理器就像精心实现的触发器、存储过程和物化视图维护例程。</li>
<li>它们维护的衍生数据系统就像不同的索引类型。例如，关系数据库支持 B 树索引、散列索引、空间索引等。</li>
</ul>
<p>新兴的衍生数据系统架构中，由各种不同的软件提供，运行在不同的机器上，由不同的团队管理。</p>
<p>如果我们从没有适合所有访问模式的单一数据模型或存储格式的前提出发，我推测有两种途径可以将不同的存储和处理工具组合成一个有凝聚力的系统：</p>
<p><strong>联合数据库：统一读取</strong></p>
<p>可以为各种各样的底层存储引擎和处理方法提供一个统一的查询接口 —— 一种称为 <strong>联合数据库（federated database）</strong> 或 <strong>多态存储（polystore）</strong> 的方法【18,19】。</p>
<ul>
<li>例如，PostgreSQL 的 <strong>外部数据包装器（foreign data wrapper）</strong> 功能符合这种模式【20】。</li>
<li>需要专用数据模型或查询接口的应用程序仍然可以直接访问底层存储引擎，而想要组合来自不同位置的数据的用户可以通过联合接口轻松完成操作。</li>
</ul>
<p>联合查询接口遵循着单一集成系统的关系型传统，带有高级查询语言和优雅的语义，但实现起来非常复杂。</p>
<p><strong>分拆数据库：统一写入</strong></p>
<p>虽然联合能解决跨多个不同系统的只读查询问题，但它并没有很好的解决跨系统 <strong>同步</strong> 写入的问题。</p>
<ul>
<li>构建多个存储系统时，我们同样需要确保所有数据变更都会在所有正确的位置结束，即使在出现故障时也是如此。</li>
</ul>
<p>想要更容易地将存储系统可靠地插接在一起（例如，通过变更数据捕获和事件日志），就像将数据库的索引维护功能以可以跨不同技术同步写入的方式分开【7,21】。</p>
<p>分拆方法遵循 Unix 传统的小型工具，它可以很好地完成一件事【22】，通过统一的低层级 API（管道）进行通信，并且可以使用更高层级的语言进行组合（shell）【16】 。</p>
<h4 id="_16">开展分拆工作</h4>
<p>联合和分拆是一个硬币的两面：用不同的组件构成可靠、 可伸缩和可维护的系统。</p>
<ul>
<li>联合只读查询需要将一个数据模型映射到另一个数据模型，需要一些思考，但最终还是一个可解决的问题；</li>
<li>同步写入到几个存储系统是更困难的工程问题，所以我将重点关注它。</li>
</ul>
<p>传统的同步写入方法需要跨异构存储系统的分布式事务【18】，我认为这是错误的解决方案。</p>
<ul>
<li>单个存储或流处理系统内的事务是可行的，但是当数据跨越不同技术之间的边界时，我认为具<strong>有幂等写入的异步事件日志</strong>是一种更加健壮和实用的方法。</li>
</ul>
<p>例如，分布式事务在某些流处理组件内部使用，以匹配 <strong>恰好一次（exactly-once）</strong> 语义，这可以很好地工作。然而，当事务需要涉及由不同人群编写的系统时（例如，当数据从流处理组件写入分布式键值存储或搜索索引时），缺乏标准化的事务协议会使集成更难。</p>
<ul>
<li>有幂等消费者的有序事件日志是一种更简单的抽象，因此在异构系统中实现更加可行【7】。</li>
</ul>
<p>基于日志的集成的一大优势是各个组件之间的 <strong>松散耦合（loose coupling）</strong>，这体现在两个方面：</p>
<ul>
<li>在系统级别，异步事件流使整个系统在个别组件的中断或性能下降时更加稳健。</li>
<li>如果消费者运行缓慢或失败，那么事件日志可以缓冲消息，以便生产者和任何其他消费者可以继续不受影响地运行。</li>
<li>有问题的消费者可以在问题修复后赶上，因此不会错过任何数据，并且包含故障。相比之下，分布式事务的同步交互往往会将本地故障升级为大规模故障。</li>
<li>在人力方面，分拆数据系统允许不同的团队独立开发，改进和维护不同的软件组件和服务。</li>
<li>专业化使得每个团队都可以专注于做好一件事，并与其他团队的系统以明确的接口交互。</li>
<li>事件日志提供了一个足够强大的接口，以捕获相当强的一致性属性（由于持久性和事件的顺序），但也足够普适于几乎任何类型的数据。</li>
</ul>
<h4 id="vs">分拆系统vs集成系统</h4>
<p>如果分拆确实成为未来的方式，它也不会取代目前形式的数据库 —— 它们仍然会像以往一样被需要。</p>
<ul>
<li>为了维护流处理组件中的状态，数据库仍然是需要的，并且为批处理和流处理器的输出提供查询服务。</li>
<li>专用查询引擎对于特定的工作负载仍然非常重要：例如，MPP 数据仓库中的查询引擎针对探索性分析查询进行了优化，并且能够很好地处理这种类型的工作负载。</li>
</ul>
<p>比起使用应用代码拼接多个工具而成的系统，单一集成软件产品也可以在其设计应对的工作负载类型上实现更好、更可预测的性能【23】。</p>
<p>分拆的目标不是要针对个别数据库与特定工作负载的性能进行竞争；我们的目标是允许你结合多个不同的数据库，以便在比单个软件可能实现的更广泛的工作负载范围内实现更好的性能。</p>
<p>因此，<strong>如果有一项技术可以满足你的所有需求，那么最好使用该产品</strong>，而不是试图用更低层级的组件重新实现它。只有当没有单一软件满足你的所有需求时，才会出现拆分和联合的优势。</p>
<h4 id="_17">少了什么？</h4>
<p>还缺少一个主要的东西：没有与 Unix shell 类似的分拆数据库等价物（即，一种声明式的、简单的、用于组装存储和处理系统的高级语言）。</p>
<p>例如，如果我们可以简单地声明 <code>mysql | elasticsearch</code>，类似于 Unix 管道【22】，成为 <code>CREATE INDEX</code> 的分拆等价物：读取 MySQL 数据库中的所有文档并将其索引到 Elasticsearch 集群中。然后它会不断捕获对数据库所做的所有变更，并自动将它们应用于搜索索引，而无需编写自定义应用代码。这种集成应当支持几乎任何类型的存储或索引系统。</p>
<p>同样，能够更容易地预先计算和更新缓存将是一件好事。你可以通过为复杂查询声明指定物化视图来创建缓存，包括图上的递归查询和应用逻辑。在这方面有一些有趣的早期研究，如 <strong>差分数据流（differential dataflow）</strong>【24,25】，我希望这些想法能够在生产系统中找到自己的方法。</p>
<h3 id="_18">围绕数据流设计应用</h3>
<p>使用应用代码组合专用存储与处理系统来分拆数据库的方法，也被称为 “<strong>数据库由内而外（database inside-out）</strong>” 方法【26】【27】。仅将其看作是一种设计模式，而不是“新架构”。</p>
<ul>
<li>是很多人的思想的融合，以 Oz【28】和 Juttle【29】为代表的数据流语言，以 Elm【30,31】为代表的 <strong>函数式响应式编程（functional reactive programming, FRP）</strong>，以 Bloom【32】为代表的逻辑编程语言。</li>
</ul>
<p>即使是 <strong>电子表格</strong> 也在数据流编程能力上甩开大多数主流编程语言几条街【33】。</p>
<ul>
<li>只要公式的任何输入发生变更，公式的结果都会自动重新计算；</li>
<li>这正是我们在数据系统层次所需要的：当数据库中的记录发生变更时，我们希望自动更新该记录的任何索引，并且自动刷新依赖于记录的任何缓存视图或聚合。</li>
</ul>
<p>因此，我认为绝大多数数据系统仍然可以从 VisiCalc 在 1979 年已经具备的功能中学习【34】。今天的数据系统需要具有容错性，可伸缩性以及持久存储数据。还需要能够整合不同人群编写的不同技术，并重用现有的库和服务：</p>
<ul>
<li>期望使用某一种特定的语言、框架或工具来开发所有软件是不切实际的。</li>
</ul>
<p>在本节中，我将详细介绍这些想法，并探讨一些围绕分拆数据库和数据流的想法构建应用的方法。</p>
<h4 id="_19">应用代码作为衍生函数</h4>
<p>当一个数据集衍生自另一个数据集时，它会经历某种转换函数。例如：</p>
<ul>
<li>次级索引是由一种直白的转换函数生成的衍生数据集：对于基础表中的每行或每个文档，它挑选被索引的列或字段中的值，并按这些值排序（假设使用 B 树或 SSTable 索引，按键排序）。</li>
<li>全文搜索索引是通过应用各种自然语言处理函数而创建的，诸如语言检测、分词、词干或词汇化、拼写纠正和同义词识别，然后构建用于高效查找的数据结构（例如倒排索引）。</li>
<li>在机器学习系统中，我们可以将模型视作从训练数据通过应用各种特征提取、统计分析函数衍生的数据，当模型应用于新的输入数据时，模型的输出是从输入和模型（因此间接地从训练数据）中衍生的。</li>
<li>缓存通常包含将以用户界面（UI）显示的形式的数据聚合。因此填充缓存需要知道 UI 中引用的字段；UI 中的变更可能需要更新缓存填充方式的定义，并重建缓存。</li>
</ul>
<p>用于次级索引的衍生函数是如此常用的需求，以致于它作为核心功能被内建至许多数据库中，你可以简单地通过 <code>CREATE INDEX</code> 来调用它。对于全文索引，常见语言的基本语言特征可能内置到数据库中，但更复杂的特征通常需要领域特定的调整。在机器学习中，特征工程是众所周知的特定于应用的特征，通常需要包含很多关于用户交互与应用部署的详细知识【35】。</p>
<p>当创建衍生数据集的函数不是像创建次级索引那样的标准搬砖函数时，需要自定义代码来处理特定于应用的东西。</p>
<ul>
<li>这个自定义代码是让许多数据库挣扎的地方，虽然关系数据库通常支持触发器、存储过程和用户定义的函数，可以用它们来在数据库中执行应用代码，但它们有点像数据库设计里的事后反思。</li>
</ul>
<h4 id="_20">应用代码和状态的分离</h4>
<p>理论上，数据库可以是任意应用代码的部署环境。但实践中，。它们不满足现代应用开发的要求，例如依赖和软件包管理、版本控制、滚动升级、可演化性、监控、指标、对网络服务的调用以及与外部系统的集成。</p>
<p>另一方面，Mesos、YARN、Docker、Kubernetes 等部署和集群管理工具专为运行应用代码而设计。</p>
<p>我认为让系统的某些部分专门用于持久数据存储并让其他部分专门运行应用程序代码是有意义的。这两者可以在保持独立的同时互动。</p>
<p>趋势是将<strong>无状态应用程序逻辑与状态管理（数据库）</strong>分开：不将应用程序逻辑放入数据库中，也不将持久状态置于应用程序中【36】。</p>
<ul>
<li>典型的 Web 应用模型中，数据库充当一种可以通过网络同步访问的可变共享变量。</li>
<li>应用程序可以读取和更新变量，而数据库负责维持它的持久性，提供一些诸如并发控制和容错的功能。</li>
</ul>
<p>但是，在大多数编程语言中，你无法订阅可变变量中的变更 —— 你只能定期读取它。</p>
<ul>
<li>数据库继承了这种可变数据的被动方法：如果你想知道数据库的内容是否发生了变化，通常你唯一的选择就是轮询（即定期重复你的查询）。订阅变更只是刚刚开始出现的功能。</li>
</ul>
<h4 id="_21">数据流：应用代码与状态变化的交互</h4>
<p>从数据流的角度思考应用程序，意味着重新协调应用代码和状态管理之间的关系。不再将数据库视作被应用操纵的被动变量，取而代之的是更多地考虑状态，状态变更和处理它们的代码之间的相互作用与协同关系。应用代码通过在另一个地方触发状态变更来响应状态变更。</p>
<p>将数据库的变更日志视为一种我们可以订阅的事件流。诸如 Actor 的消息传递系统也具有响应事件的概念。</p>
<p>早在 20 世纪 80 年代，<strong>元组空间（tuple space）</strong> 模型就已经探索了表达分布式计算的方式：观察状态变更并作出反应的过程【38,39】。</p>
<p>当触发器由于数据变更而被触发时，或次级索引更新以反映索引表中的变更时，数据库内部也发生着类似的情况。分拆数据库意味着将这个想法应用于在主数据库之外，用于创建衍生数据集：缓存、全文搜索索引、机器学习或分析系统。我们可以为此使用流处理和消息传递系统。</p>
<p>需要记住的重要一点是，维护衍生数据不同于执行异步任务。传统的消息传递系统通常是为执行异步任务设计的：</p>
<ul>
<li>在维护衍生数据时，状态变更的顺序通常很重要（如果多个视图是从事件日志衍生的，则需要按照相同的顺序处理事件，以便它们之间保持一致）。</li>
<li>容错是衍生数据的关键：仅仅丢失单个消息就会导致衍生数据集永远与其数据源失去同步。消息传递和衍生状态更新都必须可靠。</li>
<li>例如，许多 Actor 系统默认在内存中维护 Actor 的状态和消息，所以如果运行 Actor 的机器崩溃，状态和消息就会丢失。</li>
</ul>
<p>稳定的消息排序和容错消息处理是相当严格的要求，但与分布式事务相比，它们开销更小，运行更稳定。现代流处理组件可以提供这些排序和可靠性保证，并允许应用代码以流算子的形式运行。</p>
<p>这些应用代码可以执行任意处理，包括数据库内置衍生函数通常不提供的功能。就像通过管道链接的 Unix 工具一样，流算子可以围绕着数据流构建大型系统。每个算子接受状态变更的流作为输入，并产生其他状态变化的流作为输出。</p>
<h4 id="_22">流处理器和服务</h4>
<p>当今流行的应用开发风格涉及将功能分解为一组通过同步网络请求（如 REST API）进行通信的 <strong>服务</strong>）。</p>
<ul>
<li>面向服务的架构优于单一庞大应用的优势主要在于：通过松散耦合来提供组织上的可伸缩性：不同的团队可以专职于不同的服务上，从而减少团队之间的协调工作。</li>
</ul>
<p>在数据流中组装流算子与微服务方法有很多相似之处【40】。但底层通信机制是有很大区别：数据流采用单向异步消息流，而不是同步的请求 / 响应式交互。</p>
<p>除了在 “<a href="4_encoding_and_evolution.html#消息传递中的数据流">消息传递中的数据流</a>” 中列出的优点（如更好的容错性），数据流系统还能实现更好的性能。例如，假设客户正在购买以一种货币定价，但以另一种货币支付的商品。需要知道当前的汇率，有两种实现方式【40,41】：</p>
<ul>
<li>在微服务方法中，处理购买的代码可能会查询汇率服务或数据库，以获取特定货币的当前汇率。</li>
<li>在数据流方法中，处理订单的代码会提前订阅汇率变更流，并在汇率发生变动时将当前汇率存储在本地数据库中。处理订单时只需查询本地数据库即可。</li>
</ul>
<p>第二种方法能将对另一服务的同步网络请求替换为对本地数据库的查询（可能在同一台机器甚至同一个进程中）<sup id="fnref:2"><a class="footnote-ref" href="#fn:2">1</a></sup>。数据流方法不仅更快，而且当其他服务失效时也更稳健。最快且最可靠的网络请求就是压根没有网络请求！</p>
<p>连接是时间相关的：如果购买事件在稍后的时间点被重新处理，汇率可能已经改变。如果要重建原始输出，则需要获取<strong>原始购买时的历史汇率</strong>。无论是查询服务还是订阅汇率更新流，你都需要处理这种时间相关性。</p>
<p>订阅变更流，而不是在需要时查询当前状态，使我们更接近类似电子表格的计算模型：当某些数据发生变更时，依赖于此的所有衍生数据都可以快速更新。</p>
<ul>
<li>还有很多未解决的问题，例如关于时间相关连接等问题，但我认为围绕数据流构建应用的想法是一个非常有希望的方向。</li>
</ul>
<h3 id="_23">观察衍生数据状态</h3>
<p>在抽象层面，上一节讨论的数据流系统提供了创建衍生数据集（例如搜索索引、物化视图和预测模型）并使其保持更新的过程。我们将这个过程称为 <strong>写路径（write path）</strong>：只要某些信息被写入系统，它可能会经历批处理与流处理的多个阶段，而最终每个衍生数据集都会被更新，以适配写入的数据。</p>
<p><a href="pics/fig12-1.png">图 12-1</a> 显示了一个更新搜索索引的例子。</p>
<ul>
<li>为什么一开始就要创建衍生数据集？很可能是因为你想在以后再次查询它。这就是 <strong>读路径（read path）</strong>：当服务用户请求时，你需要从衍生数据集中读取，也许还要对结果进行一些额外处理，然后构建给用户的响应。</li>
<li>衍生数据集是写路径和读路径相遇的地方。它代表了在写入时需要完成的工作量与在读取时需要完成的工作量之间的权衡。</li>
</ul>
<p><img alt="img" src="pics/fig12-1.png" /></p>
<center><b>图 12-1 在搜索索引中，写（文档更新）遇上读（查询）</b></center>

<p>写路径和读路径涵盖了数据的整个旅程，从收集数据开始，到使用数据结束（可能是由另一个人）。写路径是预计算过程的一部分 —— 即，一旦数据进入，即刻完成，无论是否有人需要看它。读路径是这个过程中只有当有人请求时才会发生的部分。如果你熟悉函数式编程语言，则可能会注意到写路径类似于立即求值，读路径类似于惰性求值。</p>
<h4 id="_24">物化视图和缓存</h4>
<p>全文搜索索引就是一个很好的例子：写路径更新索引，读路径在索引中搜索关键字。读写都需要做一些工作。</p>
<ul>
<li>写入需要更新文档中出现的所有关键词的索引条目。</li>
<li>读取需要搜索查询中的每个单词，并应用布尔逻辑来查找包含查询中所有单词（AND 运算符）的文档，或者每个单词（OR 运算符）的任何同义词。</li>
</ul>
<p>如果没有索引，搜索查询将不得不扫描所有文档（如 grep），如果有着大量文档，这样做的开销巨大。没有索引意味着写入路径上的工作量较少（没有要更新的索引），但是在读取路径上需要更多工作。</p>
<p>另一方面，可以想象为所有可能的查询预先计算搜索结果。在这种情况下，读路径上的工作量会减少：不需要布尔逻辑，只需查找查询结果并返回即可。但写路径会更加昂贵：可能的搜索查询集合是无限大的，因此预先计算所有可能的搜索结果将需要无限的时间和存储空间。</p>
<p>从这个例子中我们可以看到，索引不是写路径和读路径之间唯一可能的边界；缓存常见搜索结果也是可行的；而在少量文档上使用没有索引的类 grep 扫描也是可行的。</p>
<ul>
<li>缓存，索引和物化视图的作用很简单：它们改变了读路径与写路径之间的边界。通过预先计算结果，从而允许我们在写路径上做更多的工作，以节省读路径上的工作量。</li>
</ul>
<h4 id="_25">有状态、可离线的客户端</h4>
<p>我发现写路径和读路径之间的边界很有趣，因为我们可以试着改变这个边界，并探讨这种改变的实际意义。</p>
<p>传统上，网络浏览器是无状态的客户端，只有当连接到互联网时才能做一些有用的事情（能离线执行的唯一事情基本上就是上下滚动之前在线时加载好的页面）。然而，最近的 “单页面” JavaScript Web 应用已经获得了很多有状态的功能，包括客户端用户界面交互，以及 Web 浏览器中的持久化本地存储。移动应用可以类似地在设备上存储大量状态，而且大多数用户交互都不需要与服务器往返交互。</p>
<p>这些不断变化的功能重新引发了对 <strong>离线优先（offline-first）</strong> 应用的兴趣，这些应用尽可能地在同一设备上使用本地数据库，无需连接互联网，并在后台网络连接可用时与远程服务器同步【42】。由于移动设备通常具有缓慢且不可靠的蜂窝网络连接，因此，如果用户的用户界面不必等待同步网络请求，且应用主要是离线工作的，则这是一个巨大优势。</p>
<p>可以将设备上的状态视为 <strong>服务器状态的缓存</strong>。屏幕上的像素是客户端应用中模型对象的物化视图；模型对象是远程数据中心的本地状态副本【27】。</p>
<h4 id="_26">将状态变更推送给客户端</h4>
<p>在典型的网页中，如果你在 Web 浏览器中加载页面，并且随后服务器上的数据发生变更，则浏览器在重新加载页面之前对此一无所知。浏览器只能在一个时间点读取数据，假设它是静态的 —— 它不会订阅来自服务器的更新。因此设备上的状态是陈旧的缓存，除非你显式轮询变更否则不会更新。（像 RSS 这样基于 HTTP 的 Feed 订阅协议实际上只是一种基本的轮询形式）</p>
<p>最近的协议已经超越了 HTTP 的基本请求 / 响应模式：服务端发送的事件（EventSource API）和 WebSockets 提供了通信信道。Web 浏览器可以与服务器保持打开的 TCP 连接，只要浏览器仍然连接着，服务器就能主动向浏览器推送信息。</p>
<p>用我们的写路径与读路径模型来讲，主动将状态变更推至到客户端设备，意味着将写路径一直延伸到终端用户。在流处理和消息传递部分讨论的想法并不局限于数据中心中：我们可以进一步采纳这些想法，并将它们一直延伸到终端用户设备【43】。</p>
<p>这些设备有时会离线，并在此期间无法收到服务器状态变更的任何通知。但是我们已经解决了这个问题：</p>
<ul>
<li>基于日志的消息代理的消费者能在失败或断开连接后重连，并确保它不会错过掉线期间任何到达的消息。</li>
<li>同样的技术适用于单个用户，每个设备都是一个小事件流的小小订阅者。</li>
</ul>
<h4 id="_27">端到端的事件流</h4>
<p>最近用于开发有状态的客户端与用户界面的工具，例如如 Elm 语言【30】和 Facebook 的 React、Flux 和 Redux 工具链，已经通过订阅表示用户输入或服务器响应的事件流来管理客户端的内部状态，其结构与事件溯源相似。</p>
<p>将这种编程模型扩展为：允许服务器将状态变更事件推送到客户端的事件管道中，是非常自然的。</p>
<p>状态变化可以通过 <strong>端到端（end-to-end）</strong> 的写路径流动：从一个设备上的交互触发状态变更开始，经由事件日志，并穿过几个衍生数据系统与流处理器，一直到另一台设备上的用户界面，而有人正在观察用户界面上的状态变化。这些状态变化能以相当低的延迟传播 —— 比如说，在一秒内从一端到另一端。</p>
<p>一些应用（如即时消息传递与在线游戏）已经具有这种 “实时” 架构（在低延迟交互的意义上）。但我们为什么不用这种方式构建所有的应用？</p>
<ul>
<li>挑战在于，关于无状态客户端和请求 / 响应交互的假设已经根深蒂固地植入在我们的数据库、库、框架以及协议之中。-</li>
<li>许多数据存储支持读取与写入操作，为请求返回一个响应，但只有极少数提供订阅变更的能力 —— 请求返回一个随时间推移的响应流。</li>
</ul>
<p>为了将写路径延伸至终端用户，从根本上重新思考我们构建这些系统的方式：从请求 / 响应交互转向发布 / 订阅数据流【27】。如果你正在设计数据系统，我希望你对订阅变更的选项留有印象，而不只是查询当前状态。</p>
<h4 id="_28">读也是事件</h4>
<p>在很多情况下，数据存储与流处理系统是分开的。但流处理器还是需要维护状态以执行聚合和连接的，这种状态通常隐藏在流处理器内部，但一些框架也允许这些状态被外部客户端查询【45】，将流处理器本身变成一种简单的数据库。</p>
<p>对存储的写入是通过事件日志进行的，而读取是临时的网络请求，直接流向存储着待查数据的节点。这是一个合理的设计，但不是唯一可行的设计。</p>
<ul>
<li>也可以将读取请求表示为事件流，并同时将读事件与写事件送往流处理器；流处理器通过将读取结果发送到输出流来响应读取事件【46】。</li>
</ul>
<p>当写入和读取都被表示为事件，并且被路由到同一个流算子以便处理时，是在读取查询流和数据库之间执行流表连接。读取事件需要被送往保存数据的数据库分区，就像批处理和流处理器在连接时需要在同一个键上对输入分区一样。</p>
<p>服务请求与执行连接之间的这种相似之处是非常关键的【47】。一次性读取请求只是将请求传过连接算子，然后请求马上就被忘掉了；而一个订阅请求，则是与连接另一侧过去与未来事件的持久化连接。</p>
<p>记录读取事件的日志可能对于追踪整个系统中的因果关系与数据来源也有好处：它可以让你重现出当用户做出特定决策之前看见了什么。</p>
<ul>
<li>如在网商中，向客户显示的预测送达日期与库存状态，可能会影响他们是否选择购买一件商品【4】。要分析这种联系，则需要记录用户查询运输与库存状态的结果。</li>
</ul>
<p>将读取事件写入持久存储可以更好地跟踪因果关系，但会产生额外的存储与 I/O 成本：</p>
<ul>
<li>优化这些系统以减少开销仍然是一个开放的研究问题【2】。</li>
<li>如果你已经出于运维目的留下了读取请求日志，将其作为请求处理的副作用，那么将这份日志作为请求事件源并不是什么特别大的变更。</li>
</ul>
<h4 id="_29">多分区数据处理</h4>
<p>对于只涉及单个分区的查询，通过流来发送查询与收集响应可能是杀鸡用牛刀了。然而，这个想法开启了分布式执行复杂查询的可能性，这需要合并来自多个分区的数据，利用了流处理器已经提供的消息路由、分区和连接的基础设施。</p>
<ul>
<li>Storm 的分布式 RPC 功能支持这种使用模式，被用来计算浏览过某个推特 URL 的人数 —— 即，发推包含该 URL 的所有人的粉丝集合的并集【48】。由于推特的用户是分区的，因此这种计算需要合并来自多个分区的结果。</li>
<li>另一个例子是欺诈预防：为了评估特定购买事件是否具有欺诈风险，你可以检查该用户 IP 地址，电子邮件地址，帐单地址，送货地址的信用分。这些信用数据库中的每一个都是有分区的，因此为特定购买事件采集分数需要连接一系列不同的分区数据集【49】。</li>
</ul>
<p>MPP 数据库的内部查询执行图有着类似的特征。如果需要执行这种多分区连接，则直接使用提供此功能的数据库，可能要比使用流处理器实现它要更简单。</p>
<ul>
<li>将查询视为流提供了一种选项，可以用于实现超出传统现成解决方案的大规模应用。</li>
</ul>
<h2 id="_30">将事情做正确</h2>
<p>对于只读取数据的无状态服务，出问题也没什么大不了的：你可以修复该错误并重启服务，而一切都恢复正常。像数据库这样的有状态系统就没那么简单了：它们被设计为永远记住事物（或多或少），所以如果出现问题，这种（错误的）效果也将潜在地永远持续下去，这意味着它们需要更仔细的思考【50】。</p>
<p>构建可靠且 <strong>正确</strong> 的应用（即使面对各种故障，程序的语义也能被很好地定义与理解）。约四十年来，原子性、隔离性和持久性（<a href="https://github.com/Vonng/ddia/blob/main/ch7.md">第七章</a>）等事务特性一直是构建正确应用的首选工具。然而这些地基没有看上去那么牢固：例如弱隔离级别带来的困惑可以佐证（请参阅 “<a href="https://github.com/Vonng/ddia/blob/main/ch7.md#弱隔离级别">弱隔离级别</a>”）。</p>
<ul>
<li>事务在某些领域被完全抛弃，并被提供更好性能与可伸缩性的模型取代，但后者有更复杂的语义。</li>
<li><strong>一致性（Consistency）</strong> 经常被谈起，但其定义并不明确。有些人断言我们应当为了高可用而 “拥抱弱一致性”，但却对这些概念实际上意味着什么缺乏清晰的认识。</li>
</ul>
<p>对于如此重要的话题，我们的理解，以及我们的工程方法却是惊人地薄弱。例如，在确定在特定事务隔离等级或复制配置下运行特定应用是否安全是非常困难的【51,52】。通常简单的解决方案似乎在低并发性的情况下工作正常，并且没有错误，但在要求更高的情况下却会出现许多微妙的错误。</p>
<ul>
<li>例如，Kyle Kingsbury 的 Jepsen 实验【53】标出了一些产品声称的安全保证与其在网络问题与崩溃时的实际行为之间的明显差异。</li>
<li>即使像数据库这样的基础设施产品没有问题，应用代码仍然需要正确使用它们提供的功能才行，如果配置很难理解，这是很容易出错的（在这种情况下指的是弱隔离级别，法定人数配置等）。</li>
</ul>
<p>如果你需要更强的正确性保证，那么可串行化与原子提交就是久经考验的方法，但它们是有代价的：它们通常只在单个数据中心中工作（这就排除了地理位置分散的架构），并限制了系统能够实现的规模与容错特性。</p>
<p>虽然传统的事务方法并没有走远，但我也相信在使应用正确而灵活地处理错误方面上，事务也不是最后一个可以谈的。在本节中，我将提出一些在数据流架构中考量正确性的方式。</p>
<h3 id="_31">数据库的端到端原则</h3>
<p>仅仅因为一个应用程序使用了具有相对较强安全属性的数据系统（例如可串行化的事务），并不意味着就可以保证没有数据丢失或损坏。例如，如果某个应用有个 Bug，导致它写入不正确的数据，或者从数据库中删除数据，那么可串行化的事务也救不了你。</p>
<ul>
<li>应用会出 Bug，而人也会犯错误。可以使用</li>
<li>不可变和仅追加的数据，阉割掉错误代码摧毁良好数据的能力，能让从错误中恢复更为容易。</li>
</ul>
<p>虽然不变性很有用，但它本身并非万灵药。让我们来看一个可能发生的、非常微妙的数据损坏案例。</p>
<h4 id="_32">正好执行一次操作</h4>
<p>在处理消息时出现问题，你可以选择放弃（丢弃消息 —— 导致数据丢失）或重试。</p>
<ul>
<li>重试可能会导致消息就被处理了两次：但为同样的服务向客户收费两次（收费太多）或增长计数器两次（夸大指标）是不可接受的。</li>
</ul>
<p>恰好一次意味着安排计算，使得最终效果与没有发生错误的情况一样，即使操作实际上因为某种错误而重试。</p>
<ul>
<li>最有效的方法之一是使操作 <strong>幂等</strong>（idempotent）：确保它无论是执行一次还是执行多次都具有相同的效果。</li>
<li>将不是天生幂等的操作变为幂等的操作需要一些额外的努力与关注：你可能需要维护一些额外的元数据（例如更新了值的操作 ID 集合），并在从一个节点故障切换至另一个节点时做好防护。</li>
</ul>
<h4 id="_33">抑制重复</h4>
<p>除了流处理之外，其他许多地方也需要抑制重复的模式。</p>
<ul>
<li>例如，TCP 使用了数据包上的序列号，以便接收方可以将它们正确排序，并确定网络上是否有数据包丢失或重复。在将数据交付应用前，TCP 协议栈会重新传输任何丢失的数据包，也会移除任何重复的数据包。</li>
</ul>
<p>但是，这种重复抑制仅适用于单条 TCP 连接的场景中。假设 TCP 连接是一个客户端与数据库的连接，并且它正在执行下例中的事务。</p>
<ul>
<li>在许多数据库中，事务是绑定在客户端连接上的（如果客户端发送了多个查询，数据库就知道它们属于同一个事务，因为它们是在同一个 TCP 连接上发送的）。</li>
</ul>
<p><strong>例 12-1 资金从一个账户到另一个账户的非幂等转移</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="k">BEGIN</span><span class="w"> </span><span class="k">TRANSACTION</span><span class="p">;</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="w">    </span><span class="k">UPDATE</span><span class="w"> </span><span class="n">accounts</span><span class="w"> </span><span class="k">SET</span><span class="w"> </span><span class="n">balance</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">balance</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">11</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">account_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1234</span><span class="p">;</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="w">    </span><span class="k">UPDATE</span><span class="w"> </span><span class="n">accounts</span><span class="w"> </span><span class="k">SET</span><span class="w"> </span><span class="n">balance</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">balance</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">11</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">account_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4321</span><span class="p">;</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="k">COMMIT</span><span class="p">;</span>
</code></pre></div>
<p>如果客户端在发送 <code>COMMIT</code> 之后并在从数据库服务器收到响应之前遇到网络中断与连接超时，客户端是不知道事务是否已经被提交的（<a href="pics/fig8-1.png">图 8-1</a>）。客户端可以重连到数据库并重试事务，但已经处于 TCP 重复抑制的范围之外。</p>
<p>因为 例 12-1 中的事务不是幂等的，可能会发生转了 22 而不是期望的 11。尽管该示例是一个事务原子性的标准样例，但它实际上并不正确，而真正的银行并不会这样办事【3】。</p>
<p>两阶段提交协议会破坏 TCP 连接与事务之间的 1:1 映射，因为它们必须在故障后允许事务协调器重连到数据库，告诉数据库将存疑事务提交还是中止。这足以确保事务只被恰好执行一次吗？不幸的是，并不能。</p>
<p>即使我们可以抑制数据库客户端与服务器之间的重复事务，我们仍然需要担心终端用户设备与应用服务器之间的网络。例如，客户端Web浏览器成功地发送了 POST，但却在能够从服务器接收响应之前没了信号：</p>
<ul>
<li>可能会向用户显示错误消息，而客户可能会手动重试。从 Web 服务器的角度来看，重试是一个独立的请求；从数据库的角度来看，这是一个独立的事务。通常的除重机制无济于事。</li>
</ul>
<h4 id="_34">操作标识符</h4>
<p>要在通过几跳的网络通信上使操作具有幂等性，仅仅依赖数据库提供的事务机制是不够的 —— 你需要考虑 <strong>端到端（end-to-end）</strong> 的请求流。 </p>
<ul>
<li>可以为操作生成一个唯一的标识符（例如 UUID），并将其作为隐藏表单字段包含在客户端应用中，或通过计算所有表单相关字段的散列来生成操作 ID 【3】。</li>
<li>如果 Web 浏览器提交了两次 POST 请求，这两个请求将具有相同的操作 ID。然后，你可以将该操作 ID 一路传递到数据库，并检查你是否曾经使用给定的 ID 执行过一个操作。</li>
</ul>
<p><strong>例 12-2 使用唯一 ID 来抑制重复请求</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="k">ALTER</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">requests</span><span class="w"> </span><span class="k">ADD</span><span class="w"> </span><span class="k">UNIQUE</span><span class="w"> </span><span class="p">(</span><span class="n">request_id</span><span class="p">);</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="k">BEGIN</span><span class="w"> </span><span class="k">TRANSACTION</span><span class="p">;</span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="w">    </span><span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">requests</span>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="w">        </span><span class="p">(</span><span class="n">request_id</span><span class="p">,</span><span class="w"> </span><span class="n">from_account</span><span class="p">,</span><span class="w"> </span><span class="n">to_account</span><span class="p">,</span><span class="w"> </span><span class="n">amount</span><span class="p">)</span>
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="w">        </span><span class="k">VALUES</span><span class="p">(</span><span class="s1">&#39;0286FDB8-D7E1-423F-B40B-792B3608036C&#39;</span><span class="p">,</span><span class="w"> </span><span class="mi">4321</span><span class="p">,</span><span class="w"> </span><span class="mi">1234</span><span class="p">,</span><span class="w"> </span><span class="mi">11</span><span class="p">.</span><span class="mi">00</span><span class="p">);</span>
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="w">    </span><span class="k">UPDATE</span><span class="w"> </span><span class="n">accounts</span><span class="w"> </span><span class="k">SET</span><span class="w"> </span><span class="n">balance</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">balance</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">11</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">account_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1234</span><span class="p">;</span>
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a><span class="w">    </span><span class="k">UPDATE</span><span class="w"> </span><span class="n">accounts</span><span class="w"> </span><span class="k">SET</span><span class="w"> </span><span class="n">balance</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">balance</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">11</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">account_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4321</span><span class="p">;</span>
<a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a><span class="k">COMMIT</span><span class="p">;</span>
</code></pre></div>
<p>上例依赖于 <code>request_id</code> 列上的唯一约束。如果一个事务尝试插入一个已经存在的 ID，那么 <code>INSERT</code> 失败，事务被中止，使其无法生效两次。即使在较弱的隔离级别下，关系数据库也能正确地维护唯一性约束（而在 “<a href="7_transaction.html#写入偏差与幻读">写入偏差与幻读</a>” 中讨论过，应用级别的 <strong>检查 - 然后 - 插入</strong> 可能会在不可串行化的隔离下失败）。</p>
<p>除了抑制重复的请求之外，上例的请求表表现得就像一种事件日志，暗示着事件溯源的想法。更新账户余额事实上不必与插入事件发生在同一个事务中，因为它们是冗余的，而能由下游消费者从请求事件中衍生出来 —— 只要该事件被恰好处理一次，这又一次可以使用请求 ID 来强制执行。</p>
<h4 id="_35">端到端原则</h4>
<p>抑制重复事务的这种情况只是一个更普遍的原则的一个例子，这个原则被称为 <strong>端到端原则（end-to-end argument）</strong>，它在 1984 年由 Saltzer、Reed 和 Clark 阐述【55】：</p>
<blockquote>
<p>只有在通信系统两端应用的知识与帮助下，所讨论的功能才能完全地正确地实现。因而将这种被质疑的功能作为通信系统本身的功能是不可能的（有时，通信系统可以提供这种功能的不完备版本，可能有助于提高性能）。</p>
</blockquote>
<p>在我们的例子中 <strong>所讨论的功能</strong> 是重复抑制。我们看到 TCP 在 TCP 连接层次抑制了重复的数据包，一些流处理器在消息处理层次提供了所谓的恰好一次语义，但这些都无法阻止当一个请求超时时，<strong>用户亲自提交重复的请求</strong>。</p>
<ul>
<li>TCP，数据库事务，以及流处理器本身并不能完全排除这些重复。</li>
<li>解决这个问题需要一个端到端的解决方案：从终端用户的客户端一路传递到数据库的事务标识符。</li>
</ul>
<p>端到端原则也适用于检查数据的完整性：以太网，TCP 和 TLS 中内置的校验和可以检测网络中数据包的损坏情况，但是它们无法检测到由连接两端发送 / 接收软件中 Bug 导致的损坏。或数据存储所在磁盘上的损坏。</p>
<p>类似的原则也适用于加密【55】：家庭 WiFi 网络上的密码可以防止人们窃听你的 WiFi 流量，但无法阻止互联网上其他地方攻击者的窥探；客户端与服务器之间的 TLS/SSL 可以阻挡网络攻击者，但无法阻止恶意服务器。</p>
<p>尽管低层级的功能（TCP 重复抑制、以太网校验和、WiFi 加密）无法单独提供所需的端到端功能，但它们仍然很有用，因为它们能降低较高层级出现问题的可能性。例如，如果我们没有 TCP 来将数据包排成正确的顺序，那么 HTTP 请求通常就会被搅烂。</p>
<h4 id="_36">在数据系统中应用端到端思考</h4>
<p>带回最初的论点：仅仅因为应用使用了提供相对较强安全属性的数据系统，例如可串行化的事务，并不意味着应用的数据就不会丢失或损坏了。应用本身也需要采取端到端的措施，例如除重。</p>
<p>这实在是一个遗憾，因为容错机制很难弄好。</p>
<ul>
<li>低层级的可靠机制（比如 TCP 中的那些）运行的相当好，因而剩下的高层级错误基本很少出现。</li>
<li>还没有找到将这些剩下的高层级容错机制打包成抽象，而应用不需要再去操心的方案。</li>
</ul>
<p>长期以来，事务被认为是一个很好的抽象，将各种可能的问题（并发写入、违背约束、崩溃、网络中断、磁盘故障）合并为两种可能结果：提交或中止。这是对编程模型而言是一种巨大的简化，但恐怕这还不够。</p>
<p>拒绝使用分布式事务是因为它开销太大，结果我们最后不得不在应用代码中重新实现容错机制。</p>
<ul>
<li>对并发性与部分失败的推理是困难且违反直觉的，所以我怀疑大多数应用级别的机制都不能正确工作，最终结果是数据丢失或损坏。</li>
</ul>
<p>出于这些原因，我认为探索对容错的抽象是很有价值的。它使提供应用特定的端到端的正确性属性变得更简单，而且还能在大规模分布式环境中提供良好的性能与运维特性。</p>
<h3 id="_37">强制约束</h3>
<p>让我们思考一下在 <a href="#分拆数据库">分拆数据库</a> 上下文中的 <strong>正确性</strong>。端到端的除重可以通过从客户端一路透传到数据库的请求 ID 实现。那么其他类型的约束呢？</p>
<p>先来特别关注一下<strong>唯一性约束</strong>：如，用户名或电子邮件地址必须唯一标识用户，文件存储服务不能包含多个重名文件等。</p>
<ul>
<li>其他类型的约束也非常类似：例如，确保帐户余额永远不会变为负数，确保不会超卖库存，或者会议室没有重复的预订。执行唯一性约束的技术通常也可以用于这些约束。</li>
</ul>
<h4 id="_38">唯一性约束需要达成共识</h4>
<p>在分布式环境中，强制执行唯一性约束需要共识：如果存在多个具有相同值的并发请求，则系统需要决定冲突操作中的哪一个被接受，并拒绝其他违背约束的操作。</p>
<ul>
<li>达成这一共识的最常见方式是使单个节点作为领导，并使其负责所有决策。</li>
<li>如果你需要容忍领导者失效，那么就又回到了共识问题（请参阅 “<a href="9_consistency_consensus.html#单主复制与共识">单主复制与共识</a>”）。</li>
</ul>
<p>唯一性检查可以通过对唯一性字段分区做横向伸缩。例如，如果需要通过请求 ID 确保唯一性</p>
<ul>
<li>确保所有具有相同请求 ID 的请求都被路由到同一分区。让用户名是唯一，则可以按用户名的散列值做分区。</li>
</ul>
<p>但异步多主复制排除在外，因为可能会发生不同主库同时接受冲突写操作的情况，因而这些值不再是唯一的。</p>
<ul>
<li>如果你想立刻拒绝任何违背约束的写入，同步协调是无法避免的【56】。</li>
</ul>
<h4 id="_39">基于日志消息传递中的唯一性</h4>
<p>日志确保所有消费者以相同的顺序看见消息 —— 这种保证在形式上被称为 <strong>全序广播（total order boardcast）</strong> 并且等价于共识。在使用基于日志的消息传递的分拆数据库方法中，我们可以使用非常类似的方法来执行唯一性约束。</p>
<p>流处理器在单个线程上依次消费单个日志分区中的所有消息。因此，如果日志是按需要确保唯一的值做的分区，则流处理器可以无歧义地、确定性地决定几个冲突操作中的哪一个先到达。例如，在多个用户尝试宣告相同用户名的情况下【57】：</p>
<ul>
<li>每个对用户名的请求都被编码为一条消息，并追加到按用户名散列值确定的分区。</li>
<li>流处理器依序读取日志中的请求，并使用本地数据库来追踪哪些用户名已经被占用了。</li>
<li>对于所有申请可用用户名的请求，它都会记录该用户名，并向输出流发送一条成功消息。</li>
<li>对于所有申请已占用用户名的请求，它都会向输出流发送一条拒绝消息。</li>
<li>请求用户名的客户端监视输出流，等待与其请求相对应的成功或拒绝消息。</li>
</ul>
<p>该算法基本上与 “<a href="9_consistency_consensus.html#使用全序广播实现线性一致的存储">使用全序广播实现线性一致的存储</a>” 中的算法相同。它可以简单地通过增加分区数伸缩至较大的请求吞吐量，因为每个分区都可以被独立处理。</p>
<ul>
<li>该方法也适用于许多其他类型的约束：基本原理是，任何可能冲突的写入都会路由到相同的分区并按顺序处理。</li>
</ul>
<h4 id="_40">多分区请求处理</h4>
<p>当涉及多个分区时，确保操作以原子方式执行且同时满足约束就变得很有趣了。在 <strong>例 12-2 使用唯一 ID 来抑制重复请求</strong>，可能有三个分区：一个包含请求 ID，一个包含收款人账户，另一个包含付款人账户。</p>
<p>在数据库的传统方法中，执行此事务需要跨全部三个分区进行原子提交，就这些分区上的所有其他事务而言，这实质上是将该事务嵌入一个全序。而这样就要求跨分区协调，不同的分区无法再独立地进行处理，因此吞吐量很可能会受到影响。</p>
<p>但事实证明，使用分区日志可以达到等价的正确性而无需原子提交：</p>
<ol>
<li>从账户 A 向账户 B 转账的请求由客户端提供一个唯一的请求 ID，并按请求 ID 追加写入相应日志分区。</li>
<li>流处理器读取请求日志。对于每个请求消息，它向输出流发出两条消息：付款人账户 A 的借记指令（按 A 分区），收款人 B 的贷记指令（按 B 分区）。被发出的消息中会带有原始的请求 ID。</li>
<li>后续处理器消费借记 / 贷记指令流，按照请求 ID 除重，并将变更应用至账户余额。</li>
</ol>
<p>步骤 1 和步骤 2 是必要的，因为如果客户直接发送贷记与借记指令，则需要在这两个分区之间进行原子提交，以确保两者要么都发生或都不发生。为了避免对分布式事务的需要，我们首先将请求持久化记录为单条消息，然后从这第一条消息中衍生出贷记指令与借记指令。</p>
<ul>
<li>几乎在所有数据系统中，单对象写入都是原子性的，因此请求要么出现在日志中，要么就不出现，无需多分区原子提交。</li>
</ul>
<p>如果流处理器在步骤 2 中崩溃，则它会从上一个存档点恢复处理。这样做时，它不会跳过任何请求消息，但可能会多次处理请求并产生重复的贷记与借记指令。但由于它是确定性的，因此它只是再次生成相同的指令，而步骤 3 中的处理器可以使用端到端请求 ID 轻松地对其除重。</p>
<p>如果你想确保付款人的帐户不会因此次转账而透支，则可以使用一个额外的流处理器来维护账户余额并校验事务（按付款人账户分区），只有有效的事务会被记录在步骤 1 中的请求日志中。</p>
<p>通过将<strong>多分区事务分解为两个不同分区方式的阶段</strong>，并使用端到端的请求 ID，我们实现了同样的正确性属性（每个请求对付款人与收款人都恰好生效一次），即使在出现故障，且没有使用原子提交协议的情况下依然如此。</p>
<h3 id="_41">及时性与完整性</h3>
<p>事务的一个便利属性是，它们通常是线性一致的。写入者会等到事务提交，而之后其写入立刻对所有读取者可见。</p>
<p>当我们把一个操作拆分为跨越多个阶段的流处理器时，却并非如此：日志的消费者在设计上就是异步的，因此发送者不会等其消息被消费者处理完。但是，客户端等待输出流中的特定消息是可能的。</p>
<p>术语 <strong>一致性（consistency）</strong> 这个术语混淆了两个值得分别考虑的需求：</p>
<ul>
<li>及时性（Timeliness）：确保用户观察到系统的最新状态。</li>
<li>如果用户从陈旧的数据副本中读取数据，它们可能会观察到系统处于不一致的状态。但这种不一致是暂时的，而最终会通过等待与重试简单地得到解决。</li>
<li>CAP 定理使用 <strong>线性一致性（linearizability）</strong> 意义上的一致性，这是实现及时性的强有力方法。像 <strong>写后读</strong> 这样及时性更弱的一致性也很有用</li>
<li>完整性（Integrity）：意味着没有损坏；即没有数据丢失，并且没有矛盾或错误的数据。</li>
<li>例如，数据库索引必须正确地反映数据库的内容 —— 缺失某些记录的索引并不是很有用。</li>
<li>如果完整性被违背，这种不一致是永久的：在大多数情况下，等待与重试并不能修复数据库损坏。</li>
</ul>
<p>口号形式：违反及时性，“最终一致性”；违反完整性，“永无一致性”。完整性比及时性重要得多。</p>
<h4 id="_42">数据流系统的正确性</h4>
<p>在异步处理事件流时不能保证及时性，除非你显式构建一个在返回之前明确等待特定消息到达的消费者。但完整性实际上才是流处理系统的核心。</p>
<ul>
<li><strong>恰好一次</strong> 或 <strong>等效一次</strong> 语义是一种保持完整性的机制。因此在出现故障时，容错消息传递与重复抑制（例如，幂等操作）对于维护数据系统的完整性是很重要的。</li>
</ul>
<p>可靠的流处理系统可以在无需分布式事务与原子提交协议的情况下保持完整性，这意味着它们有潜力达到与后者相当的正确性，同时还具备好得多的性能与运维稳健性。为了达成这种正确性，我们组合使用了多种机制：</p>
<ul>
<li>将写入操作的内容表示为单条消息，从而可以轻松地被原子写入 —— 与事件溯源搭配效果拔群</li>
<li>使用与存储过程类似的确定性衍生函数，从这一消息中衍生出所有其他的状态变更</li>
<li>将客户端生成的请求 ID 传递通过所有的处理层次，从而允许端到端的除重，带来幂等性</li>
<li>使消息不可变，并允许衍生数据能随时被重新处理，这使从错误中恢复更加容易</li>
</ul>
<p>这种机制组合在我看来，是未来构建容错应用的一个非常有前景的方向。</p>
<h4 id="_43">宽松地解释约束</h4>
<p>执行唯一性约束需要共识，通常通过在单个节点中汇集特定分区中的所有事件来实现。如果我们想要传统的唯一性约束形式，这种限制是不可避免的，流处理也不例外。</p>
<p>许多真实世界的应用实际上可以摆脱这种形式，接受弱得多的唯一性：</p>
<ul>
<li><strong>补偿性事务（compensating transaction）</strong>【59,60】：如果两个人同时注册了相同的用户名或预订了相同的座位，你可以给其中一个人发消息道歉，并要求他们换一个不同的用户名或座位。</li>
<li>如果客户订购的物品多于仓库中的物品，你可以下单补仓，并为延误向客户道歉，向他们提供折扣。如果叉车在仓库中轧过了你的货物，剩下的货物比你想象的要少，那么你也是得这么做【61】。</li>
<li>超卖机票，超卖客房：当需求超过供给的情况出现时，就会进入补偿流程（退款、升级舱位 / 房型、提供隔壁酒店的免费的房间）。即使没有超卖，为了应对由恶劣天气或员工罢工导致的航班取消，你还是需要道歉与补偿流程 —— 从这些问题中恢复仅仅是商业活动的正常组成部分。</li>
<li>如果有人从账户超额取款，银行可以向他们收取透支费用，并要求他们偿还欠款。通过限制每天的提款总额，银行的风险是有限的。</li>
</ul>
<p>在许多商业场景中，临时违背约束并稍后通过道歉来修复，实际上是可以接受的。</p>
<p>道歉的成本是否能接受是一个商业决策。如果可以接受的话，在写入数据之前检查所有约束的传统模型反而会带来不必要的限制，而线性一致性的约束也不是必须的。乐观写入，事后检查可能是一种合理的选择。</p>
<p>这些应用 <strong>确实</strong> 需要完整性：你不会希望丢失预订信息，或者由于借方贷方不匹配导致资金消失。但是它们在执行约束时 <strong>并不需要</strong> 及时性：如果你销售的货物多于仓库中的库存，可以在事后道歉后并弥补问题。</p>
<h4 id="_44">无协调数据系统</h4>
<p>现在已经做了两个有趣的观察：</p>
<ol>
<li>数据流系统可以维持衍生数据的完整性保证，而无需原子提交、线性一致性或者同步的跨分区协调。</li>
<li>虽然严格的唯一性约束要求及时性和协调，但许多应用实际上可以接受宽松的约束：只要整个过程保持完整性，这些约束可能会被临时违反并在稍后被修复。</li>
</ol>
<p>这些观察意味着，数据流系统可以为许多应用提供无需协调的数据管理服务，且仍能给出很强的完整性保证。</p>
<p>这种 <strong>无协调（coordination-avoiding）</strong> 的数据系统有着很大的吸引力：比起需要执行同步协调的系统，它们能达到更好的性能与更强的容错能力【56】。</p>
<ul>
<li>例如，这种系统可以使用多领导者配置运维，跨越多个数据中心，在区域间异步复制。任何一个数据中心都可以持续独立运行，因为不需要同步的跨区域协调。这样的系统的及时性保证会很弱 —— 如果不引入协调它是不可能是线性一致的 —— 但它仍然可以提供有力的完整性保证。</li>
</ul>
<p>在这种情况下，可串行化事务作为<strong>维护衍生状态</strong>的一部分仍然是有用的，但它们只能在小范围内运行，在那里它们工作得很好【8】。异构分布式事务不是必需的。同步协调仍然可以在需要的地方引入（例如在无法恢复的操作之前强制执行严格的约束），但是如果只是应用的一小部分地方需要它，没必要让所有操作都付出协调的代价。【43】。</p>
<p>另一种审视协调与约束的角度是：它们减少了由于不一致而必须做出的道歉数量，但也可能会降低系统的性能和可用性，从而可能增加由于宕机中断而需要做出的道歉数量。</p>
<ul>
<li>你不可能将道歉数量减少到零，但可以根据自己的需求寻找最佳平衡点 —— 既不存在太多不一致性，又不存在太多可用性问题。</li>
</ul>
<h3 id="_45">信任但验证</h3>
<p>我们所有关于正确性，完整性和容错的讨论都基于一些假设，假设某些事情可能会出错，但其他事情不会。我们将这些假设称为我们的 <strong>系统模型</strong>（system model）：</p>
<ul>
<li>例如，我们应该假设进程可能会崩溃，机器可能突然断电，网络可能会任意延迟或丢弃消息。</li>
<li>我们也可能假设写入磁盘的数据在执行 <code>fsync</code> 后不会丢失，内存中的数据没有损坏，而 CPU 的乘法指令总是能返回正确的结果。</li>
</ul>
<p>这些假设是相当合理的，因为大多数时候它们都是成立的，如果我们不得不经常担心计算机出错，那么基本上寸步难行。在传统上，系统模型采用二元方法处理故障：我们假设有些事情可能会发生，而其他事情 <strong>永远</strong> 不会发生。</p>
<ul>
<li>问题在于违反我们假设的情况是否经常发生，以至于我们可能在实践中遇到它们。</li>
</ul>
<p>我们已经看到，数据可能会在尚未落盘时损坏，而网络上的数据损坏有时可能规避了 TCP 校验和。也许我们应当更关注这些事情？</p>
<p>除了由于硬件故障或辐射导致的随机存储器损坏之外，一些病态的存储器访问模式甚至可以在没有故障的存储器中翻转位【62】 —— 一种可用于破坏操作系统安全机制的效应【63】（这种技术被称为 <strong>Rowhammer</strong>）。</p>
<ul>
<li>要澄清的是，随机位翻转在现代硬件上仍是非常罕见的【64】。</li>
</ul>
<h4 id="bug">维护完整性，尽管软件有Bug</h4>
<p>即使广泛使用的数据库软件也有 Bug：比如 MySQL 未能正确维护唯一约束【65】，以及 PostgreSQL 的可串行化隔离等级存在特定的写入偏差异常【66】。对于不那么成熟的软件来说，情况可能要糟糕得多。</p>
<p>Bug 仍然会在不知不觉中产生。尽管它们很少，而且最终会被发现并被修复，但总会有那么一段时间，这些 Bug 可能会损坏数据。</p>
<p>而对于应用代码，我们不得不假设会有更多的错误，因为绝大多数应用的代码经受的评审与测试远远无法与数据库的代码相比。许多应用甚至没有正确使用数据库提供的用于维持完整性的功能，例如外键或唯一性约束【36】。</p>
<p>我们期望数据库始终处于一致状态。然而，只有当你假设事务没有 Bug 时，这种想法才有意义。如果应用以某种错误的方式使用数据库，例如，不安全地使用弱隔离等级，数据库的完整性就无法得到保证。</p>
<h4 id="_46">不要盲目信任承诺</h4>
<p>应该有办法查明数据是否已经损坏，以便我们能够修复它，并尝试追查错误的来源。检查数据完整性称为 <strong>审计（auditing）</strong>。</p>
<p>成熟的系统同样倾向于考虑不太可能的事情出错的可能性，并管理这种风险。</p>
<ul>
<li>HDFS 和 Amazon S3 等大规模存储系统并不完全信任磁盘：它们运行后台进程持续回读文件，并将其与其他副本进行比较，并将文件从一个磁盘移动到另一个，以便降低静默损坏的风险【67】。</li>
</ul>
<p>如果你想确保你的数据仍然存在，你必须真正读取它并进行检查。大多数时候它们仍然会在那里，但如果不是这样，你一定想尽早知道答案，而不是更晚。按照同样的原则，不时地尝试从备份中恢复是非常重要的 —— 否则当你发现备份损坏时，你可能已经遇到了数据丢失，那时候就真的太晚了。不要盲目地相信它们全都管用。</p>
<h4 id="_47">验证的文化</h4>
<p>目前还没有多少系统采用这种 “信任但是验证” 的方式来持续审计自己。许多人认为正确性保证是绝对的，并且没有为罕见的数据损坏的可能性做过准备。希望未来能看到更多的 <strong>自我验证（self-validating）</strong> 或 <strong>自我审计（self-auditing）</strong> 系统，不断检查自己的完整性，而不是依赖盲目的信任【68】。</p>
<p>我担心 ACID 数据库的文化导致我们在盲目信任技术（如事务机制）的基础上开发应用，而忽视了这种过程中的任何可审计性。由于我们所信任的技术在大多数情况下工作得很好，通常会认为审计机制并不值得投资。</p>
<p>在 NoSQL 的旗帜下，更弱的一致性保证成为常态，更不成熟的存储技术越来越被广泛使用。但是由于审计机制还没有被开发出来，尽管这种方式越来越危险，我们仍不断在盲目信任的基础上构建应用。让我们想一想如何针对可审计性而设计吧。</p>
<h4 id="_48">为可审计性而设计</h4>
<p>如果一个事务在一个数据库中改变了多个对象，在这一事实发生后，很难说清这个事务到底意味着什么。即使你捕获了事务日志，各种表中的插入、更新和删除操作并不一定能清楚地表明 <strong>为什么</strong> 要执行这些变更。决定这些变更的是应用逻辑中的调用，而这一应用逻辑稍纵即逝，无法重现。</p>
<p>相比之下，基于事件的系统可以提供更好的可审计性。</p>
<ul>
<li>在事件溯源方法中，系统的用户输入被表示为一个单一不可变事件，而任何其导致的状态变更都衍生自该事件。</li>
<li>衍生可以实现为具有确定性与可重复性，因而相同的事件日志通过相同版本的衍生代码时，会导致相同的状态变更。</li>
</ul>
<p>显式处理数据流可以使数据的 <strong>来龙去脉（provenance）</strong> 更加清晰，从而使完整性检查更具可行性。</p>
<ul>
<li>对于事件日志，我们可以使用散列来检查事件存储没有被破坏。</li>
<li>对于任何衍生状态，我们可以重新运行从事件日志中衍生它的批处理器与流处理器，以检查是否获得相同的结果，或者，甚至并行运行冗余的衍生流程。</li>
</ul>
<p>具有确定性且定义良好的数据流，也使调试与跟踪系统的执行变得容易，以便确定它 <strong>为什么</strong> 做了某些事情【4,69】。</p>
<h4 id="_49">端到端原则重现</h4>
<p>如果我们不能完全相信系统的每个组件都不会损坏 —— 每一个硬件都没缺陷，每一个软件都没有 Bug —— 那我们至少必须定期检查数据的完整性。</p>
<p>检查数据系统的完整性，最好是以端到端的方式进行：我们能在完整性检查中涵盖的系统越多，某些处理阶中出现不被察觉损坏的几率就越小。如果我们能检查整个衍生数据管道端到端的正确性，那么沿着这一路径的任何磁盘、网络、服务以及算法的正确性检查都隐含在其中了。</p>
<p>持续的端到端完整性检查可以不断提高你对系统正确性的信心，从而使你能更快地进步【70】。与自动化测试一样，审计提高了快速发现错误的可能性，从而降低了系统变更或新存储技术可能导致损失的风险。</p>
<h4 id="_50">用于可审计数据系统的工具</h4>
<p>目前，将可审计性作为顶层关注点的数据系统并不多。一些应用实现了自己的审计机制，例如将所有变更记录到单独的审计表中，但是确保审计日志与数据库状态的完整性仍然是很困难的。可以定期使用硬件安全模块对事务日志进行签名来防止篡改，但这无法保证正确的事务一开始就能进入到日志中。</p>
<p>使用密码学工具来证明系统的完整性是十分有趣的，这种方式对于宽泛的硬件与软件问题，甚至是潜在的恶意行为都很稳健有效。加密货币、区块链、以及诸如比特币、以太坊、Ripple、Stellar 的分布式账本技术已经迅速出现在这一领域【71,72,73】。</p>
<ul>
<li>从数据系统的角度来看，它们是分布式数据库，具有数据模型与事务机制，而不同副本可以由互不信任的组织托管。副本不断检查其他副本的完整性，并使用共识协议对应当执行的事务达成一致。</li>
</ul>
<p>我对这些技术的拜占庭容错方面有些怀疑，而且我发现 <strong>工作证明（proof of work）</strong> 技术非常浪费（比如，比特币挖矿）。比特币的交易吞吐量相当低，尽管更多是出于政治与经济原因而非技术上的原因。不过，完整性检查的方面是很有趣的。</p>
<p>密码学审计与完整性检查通常依赖 <strong>默克尔树（Merkle tree）</strong>【74】，这是一颗散列值的树，能够用于高效地证明一条记录出现在一个数据集中（以及其他一些特性）。除了炒作的沸沸扬扬的加密货币之外，<strong>证书透明性（certificate transparency）</strong> 也是一种依赖 Merkle 树的安全技术，用来检查 TLS/SSL 证书的有效性【75,76】。</p>
<p>那些在证书透明度与分布式账本中使用的完整性检查和审计算法，将会在通用数据系统中得到越来越广泛的应用。要使得这些算法对于没有密码学审计的系统同样可伸缩，并尽可能降低性能损失还需要一些工作。但我认为这是一个值得关注的有趣领域。</p>
<h2 id="_51">做正确的事情</h2>
<p>每个系统都服务于一个目的；我们采取的每个举措都会同时产生期望的后果与意外的后果。</p>
<ul>
<li>目的可能只是简单地赚钱，但其对世界的影响，可能会远远超出最初的目的。</li>
<li>我们建立这些系统的工程师，有责任去仔细考虑这些后果，并有意识地决定，我们希望生活在怎样的世界中。</li>
</ul>
<p>许多数据集都是关于人的：他们的行为，他们的兴趣，他们的身份。对待这些数据，我们必须怀着人性与尊重。用户也是人类，人类的尊严是至关重要的。</p>
<p>软件开发越来越多地涉及重要的道德抉择。有一些指导原则可以帮助软件工程师解决这些问题，例如 ACM 的软件工程道德规范与专业实践【77】。但实践中很少会讨论这些，更不用说应用与强制执行了。因此，工程师和产品经理有时会对隐私与产品潜在的负面后果抱有非常傲慢的态度【78,79,80】。</p>
<p>软件工程师仅仅专注于技术而忽视其后果是不够的：道德责任也是我们的责任。对道德推理很困难，但它太重要了，我们无法忽视。</p>
<h3 id="_52">预测性分析</h3>
<p>举个例子，预测性分析是 “大数据” 炒作的主要内容之一。使用数据分析预测天气或疾病传播是一码事【81】；而预测一个罪犯是否可能再犯，一个贷款申请人是否有可能违约，或者一个保险客户是否可能进行昂贵的索赔，则是另外一码事。后者会直接影响到个人的生活。</p>
<p>随着算法决策变得越来越普遍，被某种算法（准确地或错误地）标记为有风险的某人可能会遭受大量这种 “No” 的决定。系统性地被排除在工作，航旅，保险，租赁，金融服务，以及其他社会关键领域之外。这是一种对个体自由的极大约束，因此被称为 “算法监狱”【82】。</p>
<p>在尊重人权的国家，刑事司法系统会做无罪推定（默认清白，直到被证明有罪）。另一方面，自动化系统可以系统地，任意地将一个人排除在社会参与之外，不需要任何有罪的证明，而且几乎没有申诉的机会。</p>
<h4 id="_53">偏见与歧视</h4>
<p>算法做出的决定不一定比人类更好或更差。每个人都可能有偏见，即使他们主动抗拒这一点；而歧视性做法也可能已经在文化上被制度化了。人们希望根据数据做出决定，而不是通过人的主观评价与直觉，希望这样能更加公平，并给予传统体制中经常被忽视的人更好的机会【83】。</p>
<p>这些系统学到的模式是个黑盒：即使数据中存在一些相关性，我们可能也压根不知道为什么。如果算法的输入中存在系统性的偏见，则系统很有可能会在输出中学习并放大这种偏见【84】。</p>
<ul>
<li>例如，在种族隔离地区中，一个人的邮政编码，甚至是他们的 IP 地址，都是很强的种族指示物。这样的话，相信一种算法可以以某种方式将有偏见的数据作为输入，并产生公平和公正的输出【85】似乎是很荒谬的。然而这种观点似乎常常潜伏在数据驱动型决策的支持者中，这种态度被讽刺为 “在处理偏差上，机器学习与洗钱类似”（machine learning is like money laundering for bias）【86】。</li>
</ul>
<p>预测性分析系统只是基于过去进行推断；如果过去是歧视性的，它们就会将这种歧视归纳为规律。如果我们希望未来比过去更好，那么就需要道德想象力，而这是只有人类才能提供的东西【87】。数据与模型应该是我们的工具，而不是我们的主人。</p>
<h4 id="_54">责任与问责</h4>
<p>自动决策引发了关于责任与问责的问题【87】。如果一个人犯了错误，他可以被追责，受决定影响的人可以申诉。算法也会犯错误，但是如果它们出错，谁来负责【88】？</p>
<ul>
<li>当一辆自动驾驶汽车引发事故时，谁来负责？如果自动信用评分算法系统性地歧视特定种族或宗教的人，这些人是否有任何追索权？如果机器学习系统的决定要受到司法审查，你能向法官解释算法是如何做出决定的吗？</li>
</ul>
<p>收集关于人的数据并进行决策，信用评级机构是一个很经典的例子。</p>
<ul>
<li>不良的信用评分会使生活变得更艰难，但至少信用分通常是基于个人 <strong>实际的</strong> 借款历史记录，而记录中的任何错误都能被纠正（尽管机构通常会设置门槛）。</li>
<li>然而，基于机器学习的评分算法通常会使用更宽泛的输入，并且更不透明；因而很难理解特定决策是怎样作出的，以及是否有人被不公正地，歧视性地对待【89】。</li>
</ul>
<p>信用分总结了 “你过去的表现如何？”，而预测性分析通常是基于 “谁与你类似，以及与你类似的人过去表现的如何？”。</p>
<ul>
<li>与他人的行为画上等号意味着刻板印象，例如，根据他们居住的地方（与种族和阶级关系密切的特征）。那么那些放错位置的人怎么办？而且，如果是因为错误数据导致的错误决定，追索几乎是不可能的【87】。</li>
</ul>
<p>很多数据本质上是统计性的，这意味着即使概率分布在总体上是正确的，对于个例也可能是错误的。</p>
<ul>
<li>例如，如果贵国的平均寿命是 80 岁，这并不意味着你在 80 岁生日时就会死掉。很难从平均值与概率分布中对某个特定个体的寿命作出什么判断，同样，预测系统的输出是概率性的，对于个例可能是错误的。</li>
</ul>
<p>盲目相信数据决策至高无上，这不仅仅是一种妄想，而是有切实危险的。随着数据驱动的决策变得越来越普遍，我们需要弄清楚，如何使算法更负责任且更加透明，如何避免加强现有的偏见，以及如何在它们不可避免地出错时加以修复。</p>
<p>还需要想清楚，如何避免数据被用于害人，如何认识数据的积极潜力。例如，分析可以揭示人们生活的财务特点与社会特点。</p>
<ul>
<li>一方面，这种权力可以用来将援助与支持集中在帮助那些最需要援助的人身上。</li>
<li>另一方面，它有时会被掠夺性企业用于识别弱势群体，并向其兜售高风险产品，比如高利贷和没有价值的大学文凭【87,90】。</li>
</ul>
<h4 id="_55">反馈循环</h4>
<p>即使是那些对人直接影响比较小的预测性应用，比如推荐系统，也有一些必须正视的难题。当服务变得善于预测用户想要看到什么内容时，它最终可能只会向人们展示他们已经同意的观点，将人们带入滋生刻板印象，误导信息，与极端思想的 <strong>回音室</strong>。我们已经看到过社交媒体回音室对竞选的影响了【91】。</p>
<p>当预测性分析影响人们的生活时，自我强化的反馈循环会导致非常有害的问题。例如，考虑雇主使用信用分来评估候选人的例子。</p>
<ul>
<li>你可能是一个信用分不错的好员工，但因不可抗力的意外而陷入财务困境。由于不能按期付账单，你的信用分会受到影响，进而导致找到工作更为困难。</li>
<li>失业使你陷入贫困，这进一步恶化了你的分数，使你更难找到工作【87】。在数据与数学严谨性的伪装背后，隐藏的是由恶毒假设导致的恶性循环。</li>
</ul>
<p>我们无法预测这种反馈循环何时发生。然而通过对整个系统（不仅仅是计算机化的部分，而且还有与之互动的人）进行整体思考，许多后果是可以够预测的 —— 一种称为 <strong>系统思维（systems thinking）</strong> 的方法【92】。</p>
<p>我们可以尝试理解数据分析系统如何响应不同的行为，结构或特性。该系统是否加强和增大了人们之间现有的差异（例如，损不足以奉有余，富者愈富，贫者愈贫），还是试图与不公作斗争？而且即使有着最好的动机，我们也必须当心意想不到的后果。</p>
<h3 id="_56">隐私和追踪</h3>
<p>除了预测性分析 —— 使用数据来做出关于人的自动决策 —— 数据收集本身也存在道德问题。收集数据的组织，与被收集数据的人之间，到底属于什么关系？</p>
<p>当系统只存储用户明确输入的数据时，是因为用户希望系统以特定方式存储和处理这些数据，<strong>系统是在为用户提供服务</strong>：用户就是客户。但是，当用户的活动被跟踪并记录，作为他们正在做的其他事情的副作用时，这种关系就没有那么清晰了。该服务不再仅仅完成用户想要它要做的事情，而是服务于它自己的利益，而这可能与用户的利益相冲突。</p>
<p>追踪用户行为数据对于许多面向用户的在线服务而言，变得越来越重要：追踪用户点击了哪些搜索结果有助于改善搜索结果的排名；推荐 “喜欢 X 的人也喜欢 Y”，可以帮助用户发现实用有趣的东西；A/B 测试和用户流量分析有助于改善用户界面。这些功能需要一定量的用户行为跟踪，而用户也可以从中受益。</p>
<p>但不同公司有着不同的商业模式，追踪并未止步于此。如果服务是通过广告盈利的，那么广告主才是真正的客户，而用户的利益则屈居其次。跟踪的数据会变得更详细，分析变得更深入，数据会保留很长时间，以便为每个人建立详细画像，用于营销。</p>
<p>现在，公司与被收集数据的用户之间的关系，看上去就不太一样了。公司会免费服务用户，并引诱用户尽可能多地使用服务。对用户的追踪，主要不是服务于该用户个体，而是服务于掏钱资助该服务的广告商。我认为这种关系可以用一个更具罪犯内涵的词来恰当地描述：<strong>监视（surveilance）</strong>。</p>
<h4 id="_57">监视</h4>
<p>尝试用 <strong>监视（surveillance）</strong> 一词替换 <strong>数据（data）</strong>，再看看常见的短语是不是听起来还那么漂亮【93】。比如：“在我们的监视驱动的组织中，我们收集实时监视流并将它们存储在我们的监视仓库中。我们的监视科学家使用高级分析和监视处理来获得新的见解。”</p>
<p>在我们尝试制造软件 “吞噬世界” 的过程中【94】，我们已经建立了世界上迄今为止所见过的最伟大的大规模监视基础设施。</p>
<ul>
<li>正朝着万物互联迈进：每个有人居住的空间至少包含一个带互联网连接的麦克风，以智能手机、智能电视、语音控制助理设备、婴儿监视器甚至儿童玩具的形式存在，并使用基于云的语音识别。这些设备中的很多都有着可怕的安全记录【95】。</li>
</ul>
<p>我们显然是自愿地，甚至热情地投身于这个全域监视的世界。不同之处在于，数据是由公司，而不是由政府机构收集的【96】。</p>
<p>你与当权阶级穿一条裤子，你不是被边缘化的少数派，也不必害怕受到迫害【97】。</p>
<ul>
<li>不是每个人都如此幸运。或者，也许这是因为目的似乎是温和的 —— 这不是公然胁迫，也不是强制性的，而只是更好的推荐与更个性化的营销。</li>
</ul>
<p>我们已经看到与汽车追踪设备挂钩的汽车保险费，以及取决于需要人佩戴健身追踪设备来确定的健康保险范围。当监视被用于决定生活的重要方面时，例如保险或就业，它就开始变得不那么温和了。</p>
<ul>
<li>例如，智能手表或健身追踪器中的运动传感器能以相当好的精度计算出你正在输入的内容（比如密码）【98】。而分析算法只会变得越来越精确。</li>
</ul>
<h4 id="_58">同意与选择的自由</h4>
<p>我们甚至可以声称，用户在用所提供的数据来 <strong>换取</strong> 有价值的服务，并且为了提供服务，追踪是必要的。但是这个说法却存在问题。</p>
<ul>
<li>大多数隐私政策都是模棱两可：用户几乎不知道他们提供给我们的是什么数据，哪些数据被放进了数据库，数据又是怎样被保留与处理的。</li>
<li>从用户身上挖掘数据是一个单向过程，而不是真正的互惠关系，也不是公平的价值交换。服务与用户之间的关系是非常不对称与单边的。这些条款是由服务提出的，而不是由用户提出的【99】。</li>
</ul>
<p>对于不同意监视的用户，唯一真正管用的备选项，就是简单地不使用服务。但这个选择也不是真正自由的：如果一项服务如此受欢迎，以至于 “被大多数人认为是基本社会参与的必要条件”【99】，那么指望人们选择退出这项服务是不合理的 —— 使用它 <strong>事实上（de facto）</strong> 是强制性的。</p>
<p>因为一个服务会跟踪用户而拒绝使用它，这只是少数人才拥有的权力，他们有足够的时间与知识来了解隐私政策，并承受得起代价：错过社会参与，以及使用服务可能带来的专业机会。对于那些处境不太好的人而言，并没有真正意义上的选择：监控是不可避免的。</p>
<h4 id="_59">隐私与数据使用</h4>
<p>拥有隐私并不意味着保密一切东西；它意味着拥有选择向谁展示哪些东西的自由，要公开什么，以及要保密什么。<strong>隐私权是一项决定权</strong>：在从保密到透明的光谱上，隐私使得每个人都能决定自己想要在什么地方位于光谱上的哪个位置【99】。这是一个人自由与自主的重要方面。</p>
<p>当通过监控基础设施从人身上提取数据时，隐私权不一定受到损害，而是转移到了数据收集者手中。获取数据的公司实际上是说 “相信我们会用你的数据做正确的事情”，这意味着，决定要透露什么和保密什么的权利从个体手中转移到了公司手中。</p>
<p>这些公司反过来选择保密这些监视结果，因为揭露这些会令人毛骨悚然，并损害它们的商业模式（比其他公司更了解人）。用户的私密信息只会间接地披露，例如针对特定人群定向投放广告的工具（比如那些患有特定疾病的人群）。</p>
<ul>
<li>决定向谁透露什么并不是由个体按照自己的喜好决定的，而是由 <strong>公司</strong>，以利润最大化为目标来行使隐私权。</li>
</ul>
<p>允许在线服务的用户控制其隐私设置，例如控制其他用户可以看到哪些东西，是将一些控制交还给用户的第一步。但服务本身仍然可以不受限制地访问数据，并能以隐私策略允许的任何方式自由使用它。即使服务承诺不会将数据出售给第三方，它通常会授予自己不受限制的权利，以便在内部处理与分析数据，而且往往比用户公开可见的部分要深入的多。</p>
<p>这种从个体到公司的大规模隐私权转移在历史上是史无前例的【99】。监控一直存在，但它过去是昂贵的、手动的，不是可伸缩的、自动化的。信任关系一直存在，例如患者与其医生之间，或被告与其律师之间 —— 但在这些情况下，数据的使用严格受到道德，法律和监管限制的约束。</p>
<h4 id="_60">数据资产与权力</h4>
<p>从经济的角度来看，如果定向广告是服务的金主，那么关于人的行为数据就是服务的核心资产。</p>
<ul>
<li>在这种情况下，用户与之交互的应用仅仅是一种诱骗用户将更多的个人信息提供给监控基础设施的手段【99】。</li>
</ul>
<p>个人数据是珍贵资产的说法因为数据中介的存在得到支持，这是阴影中的秘密行业，购买、聚合、分析、推断以及转售私密个人数据，主要用于市场营销【90】。初创公司按照它们的用户数量，“眼球数”，—— 即它们的监视能力来估值。</p>
<p>政府也想获得数据：通过秘密交易、胁迫、法律强制或者只是窃取【101】。当公司破产时，收集到的个人数据就是被出售的资产之一。而且数据安全很难保护，因此经常发生令人难堪的泄漏事件【102】。</p>
<p>这些观察已经导致批评者声称，数据不仅仅是一种资产，而且是一种 “有毒资产”【101】，或者至少是 “有害物质”【103】。即使我们认为自己有能力阻止数据滥用，但每当我们收集数据时，我们都需要平衡收益以及这些数据落入恶人手中的风险：计算机系统可能会被犯罪分子或敌国特务渗透，数据可能会被内鬼泄露，公司可能会落入不择手段的管理层手中，而这些管理者有着迥然不同的价值观，或者国家可能被能毫无愧色迫使我们交出数据的政权所接管。</p>
<p>”在避免自己被审视的同时审视他人，是权力最重要的形式之一”【105】。这就是极权政府想要监控的原因：这让它们有能力控制全体居民。尽管今天的科技公司并没有公开地寻求政治权力，但是它们积累的数据与知识却给它们带来了很多权力，其中大部分是在公共监督之外偷偷进行的【106】。</p>
<h4 id="_61">回顾工业革命</h4>
<p>我们的日常生活与社会组织在过去十年中发生了变化，而且在未来的十年中可能会继续发生根本性的变化，所以我们会想到与工业革命对比【87,96】。</p>
<ul>
<li>
<p>工业革命带来的问题，制定保护措施花费了很长的时间，例如环境保护条例、工作场所安全条例等；但是整个社会都从中受益良多，我们中很少会有人想回到这些管制条例之前的日子【87】。</p>
</li>
<li>
<p>信息时代的重大问题，数据的收集与使用就是其中一个用 Bruce Schneier 的话来说【96】：</p>
</li>
</ul>
<blockquote>
<p>数据是信息时代的污染问题，保护隐私是环境挑战。几乎所有的电脑都能生产信息。它堆积在周围，开始溃烂。我们如何处理它 —— 我们如何控制它，以及如何摆脱它 —— 是信息经济健康发展的核心议题。正如我们今天回顾工业时代的早期年代，并想知道我们的祖先在忙于建设工业世界的过程时怎么能忽略污染问题；我们的孙辈在回望信息时代的早期年代时，将会就我们如何应对数据收集和滥用的挑战来评断我们。</p>
<p>我们应该设法让他们感到骄傲。</p>
</blockquote>
<h4 id="_62">立法与自律</h4>
<p>数据保护法可能有助于维护个人的权利。例如，1995 年的 “欧洲数据保护指示” 规定，个人数据必须 “为特定的、明确的和合法的目的收集，而不是以与这些目的不相符的方式进一步处理”，并且数据必须 “就收集的目的而言适当、相关、不过分。”【107】。</p>
<p>但是，这个立法在今天的互联网环境下是否有效还是有疑问的【108】。这些规则直接否定了大数据的哲学，即最大限度地收集数据，将其与其他数据集结合起来进行试验和探索，以便产生新的洞察。探索意味着将数据用于未曾预期的目的，这与用户同意的 “特定和明确” 目的相反（如果我们可以有意义地表示同意的话）【109】。更新的规章正在制定中【89】。</p>
<p>那些收集了大量有关人的数据的公司反对监管，认为这是创新的负担与阻碍。在某种程度上，这种反对是有道理的。例如，分享医疗数据时，存在明显的隐私风险，但也有潜在的机遇：如果数据分析能够帮助我们实现更好的诊断或找到更好的治疗方法，能够阻止多少人的死亡【110】？过度监管可能会阻止这种突破。在这种潜在机会与风险之间找出平衡是很困难的【105】。</p>
<p>从根本上说，我认为我们需要科技行业在个人数据方面的文化转变。我们应该停止将用户视作待优化的指标数据，并记住他们是值得尊重、有尊严和能动性的人。我们应当在数据收集和实际处理中自我约束，以建立和维持依赖我们软件的人们的信任【111】。我们应当将教育终端用户视为己任，告诉他们我们是如何使用他们的数据的，而不是将他们蒙在鼓里。</p>
<p>我们应该允许每个人保留自己的隐私 —— 即，对自己数据的控制 —— 而不是通过监视来窃取这种控制权。</p>
<p>我们究竟能做到哪一步，是一个开放的问题。首先，我们不应该永久保留数据，而是一旦不再需要就立即清除数据【111,112】。清除数据与不变性的想法背道而驰，但这是可以解决的问题。我所看到的一种很有前景的方法是通过加密协议来实施访问控制，而不仅仅是通过策略【113,114】。总的来说，文化与态度的改变是必要的。</p>
<h2 id="_63">本章小结</h2>
<p>没有单种工具能高效服务所有可能的用例，因此应用必须组合使用几种不同的软件才能实现其目标。</p>
<ul>
<li>讨论了如何使用批处理与事件流来解决这一 <strong>数据集成（data integration）</strong> 问题，以便让数据变更在不同系统之间流动。</li>
</ul>
<p>在这种方法中，某些系统被指定为记录系统，而其他数据则通过转换衍生自记录系统。通过使这些衍生和转换操作异步且松散耦合，能够防止一个区域中的问题扩散到系统中不相关部分，从而增加整个系统的稳健性与容错性。</p>
<p>将数据流表示为从一个数据集到另一个数据集的转换也有助于演化应用程序：如果你想变更其中一个处理步骤，例如变更索引或缓存的结构，则可以在整个输入数据集上重新运行新的转换代码，以便重新衍生输出。同样，出现问题时，你也可以修复代码并重新处理数据以便恢复。</p>
<p>这些过程与数据库内部已经完成的过程非常类似，因此我们将数据流应用的概念重新改写为，<strong>分拆（unbundling）</strong> 数据库组件，并通过组合这些松散耦合的组件来构建应用程序。</p>
<p>衍生状态可以通过观察底层数据的变更来更新。此外，衍生状态本身可以进一步被下游消费者观察。我们甚至可以将这种数据流一路传送至显示数据的终端用户设备，从而构建可动态更新以反映数据变更，并在离线时能继续工作的用户界面。</p>
<p>接下来，我们讨论了如何确保所有这些处理在出现故障时保持正确。我们看到可伸缩的强完整性保证可以通过异步事件处理来实现，通过使用端到端操作标识符使操作幂等，以及通过异步检查约束。客户端可以等到检查通过，或者不等待继续前进，但是可能会冒有违反约束需要道歉的风险。这种方法比使用分布式事务的传统方法更具可伸缩性与可靠性，并且在实践中适用于很多业务流程。</p>
<p>通过围绕数据流构建应用，并异步检查约束，我们可以避免绝大多数的协调工作，创建保证完整性且性能仍然表现良好的系统，即使在地理散布的情况下与出现故障时亦然。然后，我们对使用审计来验证数据完整性，以及损坏检测进行了一些讨论。</p>
<p>最后，审视了构建数据密集型应用的一些道德问题。我们看到，虽然数据可以用来做好事，但它也可能造成很大伤害：作出严重影响人们生活的决定却难以申诉，导致歧视与剥削、监视常态化、曝光私密信息。我们也冒着数据被泄露的风险，并且可能会发现，即使是善意地使用数据也可能会导致意想不到的</p>
<p>由于软件和数据对世界产生了如此巨大的影响，我们工程师们必须牢记，我们有责任为我们想要的那种世界而努力：一个尊重人们，尊重人性的世界。我希望我们能够一起为实现这一目标而努力。</p>
<h2 id="_64">参考文献</h2>
<ol>
<li>Rachid Belaid: “<a href="http://rachbelaid.com/postgres-full-text-search-is-good-enough/">Postgres Full-Text Search is Good Enough!</a>,” <em>rachbelaid.com</em>, July 13, 2015.</li>
<li>Philippe Ajoux, Nathan Bronson, Sanjeev Kumar, et al.: “<a href="https://www.usenix.org/system/files/conference/hotos15/hotos15-paper-ajoux.pdf">Challenges to Adopting Stronger Consistency at Scale</a>,” at <em>15th USENIX Workshop on Hot Topics in Operating Systems</em> (HotOS), May 2015.</li>
<li>Pat Helland and Dave Campbell: “<a href="https://database.cs.wisc.edu/cidr/cidr2009/Paper_133.pdf">Building on Quicksand</a>,” at <em>4th Biennial Conference on Innovative Data Systems Research</em> (CIDR), January 2009.</li>
<li>Jessica Kerr: “<a href="http://blog.jessitron.com/2016/09/provenance-and-causality-in-distributed.html">Provenance and Causality in Distributed Systems</a>,” <em>blog.jessitron.com</em>, September 25, 2016.</li>
<li>Kostas Tzoumas: “<a href="http://data-artisans.com/batch-is-a-special-case-of-streaming/">Batch Is a Special Case of Streaming</a>,” <em>data-artisans.com</em>, September 15, 2015.</li>
<li>Shinji Kim and Robert Blafford: “<a href="http://concord.io/posts/windowing_performance_analysis_w_spark_streaming">Stream Windowing Performance Analysis: Concord and Spark Streaming</a>,” <em>concord.io</em>, July 6, 2016.</li>
<li>Jay Kreps: “<a href="http://engineering.linkedin.com/distributed-systems/log-what-every-software-engineer-should-know-about-real-time-datas-unifying">The Log: What Every Software Engineer Should Know About Real-Time Data's Unifying Abstraction</a>,” <em>engineering.linkedin.com</em>, December 16, 2013.</li>
<li>Pat Helland: “<a href="http://www-db.cs.wisc.edu/cidr/cidr2007/papers/cidr07p15.pdf">Life Beyond Distributed Transactions: An Apostate’s Opinion</a>,” at <em>3rd Biennial Conference on Innovative Data Systems Research</em> (CIDR), January 2007.</li>
<li>“<a href="https://www.networkrail.co.uk/VirtualArchive/great-western/">Great Western Railway (1835–1948)</a>,” Network Rail Virtual Archive, <em>networkrail.co.uk</em>.</li>
<li>Jacqueline Xu: “<a href="https://stripe.com/blog/online-migrations">Online Migrations at Scale</a>,” <em>stripe.com</em>, February 2, 2017.</li>
<li>Molly Bartlett Dishman and Martin Fowler: “<a href="http://conferences.oreilly.com/software-architecture/sa2015/public/schedule/detail/40388">Agile Architecture</a>,” at <em>O'Reilly Software Architecture Conference</em>, March 2015.</li>
<li>Nathan Marz and James Warren: <a href="https://www.manning.com/books/big-data"><em>Big Data: Principles and Best Practices of Scalable Real-Time Data Systems</em></a>. Manning, 2015. ISBN: 978-1-617-29034-3</li>
<li>Oscar Boykin, Sam Ritchie, Ian O'Connell, and Jimmy Lin: “<a href="http://www.vldb.org/pvldb/vol7/p1441-boykin.pdf">Summingbird: A Framework for Integrating Batch and Online MapReduce Computations</a>,” at <em>40th International Conference on Very Large Data Bases</em> (VLDB), September 2014.</li>
<li>Jay Kreps: “<a href="https://www.oreilly.com/ideas/questioning-the-lambda-architecture">Questioning the Lambda Architecture</a>,” <em>oreilly.com</em>, July 2, 2014.</li>
<li>Raul Castro Fernandez, Peter Pietzuch, Jay Kreps, et al.: “<a href="http://www.cidrdb.org/cidr2015/Papers/CIDR15_Paper25u.pdf">Liquid: Unifying Nearline and Offline Big Data Integration</a>,” at <em>7th Biennial Conference on Innovative Data Systems Research</em> (CIDR), January 2015.</li>
<li>Dennis M. Ritchie and Ken Thompson: “<a href="http://www.cs.virginia.edu/~zaher/classes/CS656/p365-ritchie.pdf">The UNIX Time-Sharing System</a>,” <em>Communications of the ACM</em>, volume 17, number 7, pages 365–375, July 1974. <a href="http://dx.doi.org/10.1145/361011.361061">doi:10.1145/361011.361061</a></li>
<li>Eric A. Brewer and Joseph M. Hellerstein: “<a href="http://people.eecs.berkeley.edu/~brewer/cs262/systemr.html">CS262a: Advanced Topics in Computer Systems</a>,” lecture notes, University of California, Berkeley, <em>cs.berkeley.edu</em>, August 2011.</li>
<li>Michael Stonebraker: “<a href="http://wp.sigmod.org/?p=1629">The Case for Polystores</a>,” <em>wp.sigmod.org</em>, July 13, 2015.</li>
<li>Jennie Duggan, Aaron J. Elmore, Michael Stonebraker, et al.: “<a href="http://dspace.mit.edu/openaccess-disseminate/1721.1/100936">The BigDAWG Polystore System</a>,” <em>ACM SIGMOD Record</em>, volume 44, number 2, pages 11–16, June 2015. <a href="http://dx.doi.org/10.1145/2814710.2814713">doi:10.1145/2814710.2814713</a></li>
<li>Patrycja Dybka: “<a href="http://www.vertabelo.com/blog/technical-articles/foreign-data-wrappers-for-postgresql">Foreign Data Wrappers for PostgreSQL</a>,” <em>vertabelo.com</em>, March 24, 2015.</li>
<li>David B. Lomet, Alan Fekete, Gerhard Weikum, and Mike Zwilling: “<a href="https://www.microsoft.com/en-us/research/publication/unbundling-transaction-services-in-the-cloud/">Unbundling Transaction Services in the Cloud</a>,” at <em>4th Biennial Conference on Innovative Data Systems Research</em> (CIDR), January 2009.</li>
<li>Martin Kleppmann and Jay Kreps: “<a href="http://martin.kleppmann.com/papers/kafka-debull15.pdf">Kafka, Samza and the Unix Philosophy of Distributed Data</a>,” <em>IEEE Data Engineering Bulletin</em>, volume 38, number 4, pages 4–14, December 2015.</li>
<li>John Hugg: “<a href="https://voltdb.com/blog/winning-now-and-future-where-voltdb-shines">Winning Now and in the Future: Where VoltDB Shines</a>,” <em>voltdb.com</em>, March 23, 2016.</li>
<li>Frank McSherry, Derek G. Murray, Rebecca Isaacs, and Michael Isard: “<a href="http://cidrdb.org/cidr2013/Papers/CIDR13_Paper111.pdf">Differential Dataflow</a>,” at <em>6th Biennial Conference on Innovative Data Systems Research</em> (CIDR), January 2013.</li>
<li>Derek G Murray, Frank McSherry, Rebecca Isaacs, et al.: “<a href="http://research.microsoft.com/pubs/201100/naiad_sosp2013.pdf">Naiad: A Timely Dataflow System</a>,” at <em>24th ACM Symposium on Operating Systems Principles</em> (SOSP), pages 439–455, November 2013. <a href="http://dx.doi.org/10.1145/2517349.2522738">doi:10.1145/2517349.2522738</a></li>
<li>Gwen Shapira: “<a href="https://twitter.com/gwenshap/status/758800071110430720">We have a bunch of customers who are implementing ‘database inside-out’ concept and they all ask ‘is anyone else doing it? are we crazy?’</a>” <em>twitter.com</em>, July 28, 2016.</li>
<li>Martin Kleppmann: “<a href="http://martin.kleppmann.com/2015/03/04/turning-the-database-inside-out.html">Turning the Database Inside-out with Apache Samza,</a>” at <em>Strange Loop</em>, September 2014.</li>
<li>Peter Van Roy and Seif Haridi: <a href="http://www.epsa.org/forms/uploadFiles/3B6300000000.filename.booksingle.pdf"><em>Concepts, Techniques, and Models of Computer Programming</em></a>. MIT Press, 2004. ISBN: 978-0-262-22069-9</li>
<li>“<a href="http://juttle.github.io/juttle/">Juttle Documentation</a>,” <em>juttle.github.io</em>, 2016.</li>
<li>Evan Czaplicki and Stephen Chong: “<a href="http://people.seas.harvard.edu/~chong/pubs/pldi13-elm.pdf">Asynchronous Functional Reactive Programming for GUIs</a>,” at <em>34th ACM SIGPLAN Conference on Programming Language Design and Implementation</em> (PLDI), June 2013. <a href="http://dx.doi.org/10.1145/2491956.2462161">doi:10.1145/2491956.2462161</a></li>
<li>Engineer Bainomugisha, Andoni Lombide Carreton, Tom van Cutsem, Stijn Mostinckx, and Wolfgang de Meuter: “<a href="http://soft.vub.ac.be/Publications/2012/vub-soft-tr-12-13.pdf">A Survey on Reactive Programming</a>,” <em>ACM Computing Surveys</em>, volume 45, number 4, pages 1–34, August 2013. <a href="http://dx.doi.org/10.1145/2501654.2501666">doi:10.1145/2501654.2501666</a></li>
<li>Peter Alvaro, Neil Conway, Joseph M. Hellerstein, and William R. Marczak: “<a href="http://www.eecs.berkeley.edu/~palvaro/cidr11.pdf">Consistency Analysis in Bloom: A CALM and Collected Approach</a>,” at <em>5th Biennial Conference on Innovative Data Systems Research</em> (CIDR), January 2011.</li>
<li>Felienne Hermans: “<a href="https://vimeo.com/145492419">Spreadsheets Are Code</a>,” at <em>Code Mesh</em>, November 2015.</li>
<li>Dan Bricklin and Bob Frankston: “<a href="http://danbricklin.com/visicalc.htm">VisiCalc: Information from Its Creators</a>,” <em>danbricklin.com</em>.</li>
<li>D. Sculley, Gary Holt, Daniel Golovin, et al.: “<a href="http://research.google.com/pubs/pub43146.html">Machine Learning: The High-Interest Credit Card of Technical Debt</a>,” at <em>NIPS Workshop on Software Engineering for Machine Learning</em> (SE4ML), December 2014.</li>
<li>Peter Bailis, Alan Fekete, Michael J Franklin, et al.: “<a href="http://www.bailis.org/papers/feral-sigmod2015.pdf">Feral Concurrency Control: An Empirical Investigation of Modern Application Integrity</a>,” at <em>ACM International Conference on Management of Data</em> (SIGMOD), June 2015. <a href="http://dx.doi.org/10.1145/2723372.2737784">doi:10.1145/2723372.2737784</a></li>
<li>Guy Steele: “<a href="https://people.csail.mit.edu/gregs/ll1-discuss-archive-html/msg01134.html">Re: Need for Macros (Was Re: Icon)</a>,” email to <em>ll1-discuss</em> mailing list, <em>people.csail.mit.edu</em>, December 24, 2001.</li>
<li>David Gelernter: “<a href="http://cseweb.ucsd.edu/groups/csag/html/teaching/cse291s03/Readings/p80-gelernter.pdf">Generative Communication in Linda</a>,” <em>ACM Transactions on Programming Languages and Systems</em> (TOPLAS), volume 7, number 1, pages 80–112, January 1985. <a href="http://dx.doi.org/10.1145/2363.2433">doi:10.1145/2363.2433</a></li>
<li>Patrick Th. Eugster, Pascal A. Felber, Rachid Guerraoui, and Anne-Marie Kermarrec: “<a href="http://www.cs.ru.nl/~pieter/oss/manyfaces.pdf">The Many Faces of Publish/Subscribe</a>,” <em>ACM Computing Surveys</em>, volume 35, number 2, pages 114–131, June 2003. <a href="http://dx.doi.org/10.1145/857076.857078">doi:10.1145/857076.857078</a></li>
<li>Ben Stopford: “<a href="https://www.infoq.com/presentations/microservices-streaming">Microservices in a Streaming World</a>,” at <em>QCon London</em>, March 2016.</li>
<li>Christian Posta: “<a href="http://blog.christianposta.com/microservices/why-microservices-should-be-event-driven-autonomy-vs-authority/">Why Microservices Should Be Event Driven: Autonomy vs Authority</a>,” <em>blog.christianposta.com</em>, May 27, 2016.</li>
<li>Alex Feyerke: “<a href="http://hood.ie/blog/say-hello-to-offline-first.html">Say Hello to Offline First</a>,” <em>hood.ie</em>, November 5, 2013.</li>
<li>Sebastian Burckhardt, Daan Leijen, Jonathan Protzenko, and Manuel Fähndrich: “<a href="http://drops.dagstuhl.de/opus/volltexte/2015/5238/">Global Sequence Protocol: A Robust Abstraction for Replicated Shared State</a>,” at <em>29th European Conference on Object-Oriented Programming</em> (ECOOP), July 2015. <a href="http://dx.doi.org/10.4230/LIPIcs.ECOOP.2015.568">doi:10.4230/LIPIcs.ECOOP.2015.568</a></li>
<li>Mark Soper: “<a href="https://medium.com/@marksoper/clearing-up-react-data-management-confusion-with-flux-redux-and-relay-aad504e63cae">Clearing Up React Data Management Confusion with Flux, Redux, and Relay</a>,” <em>medium.com</em>, December 3, 2015.</li>
<li>Eno Thereska, Damian Guy, Michael Noll, and Neha Narkhede: “<a href="http://www.confluent.io/blog/unifying-stream-processing-and-interactive-queries-in-apache-kafka/">Unifying Stream Processing and Interactive Queries in Apache Kafka</a>,” <em>confluent.io</em>, October 26, 2016.</li>
<li>Frank McSherry: “<a href="https://github.com/frankmcsherry/blog/blob/master/posts/2016-07-17.md">Dataflow as Database</a>,” <em>github.com</em>, July 17, 2016.</li>
<li>Peter Alvaro: “<a href="https://www.youtube.com/watch?v=R2Aa4PivG0g">I See What You Mean</a>,” at <em>Strange Loop</em>, September 2015.</li>
<li>Nathan Marz: “<a href="https://blog.twitter.com/2012/trident-a-high-level-abstraction-for-realtime-computation">Trident: A High-Level Abstraction for Realtime Computation</a>,” <em>blog.twitter.com</em>, August 2, 2012.</li>
<li>Edi Bice: “<a href="http://www.slideshare.net/edibice/extremely-low-latency-web-scale-fraud-prevention-with-apache-samza-kafka-and-friends">Low Latency Web Scale Fraud Prevention with Apache Samza, Kafka and Friends</a>,” at <em>Merchant Risk Council MRC Vegas Conference</em>, March 2016.</li>
<li>Charity Majors: “<a href="https://charity.wtf/2016/10/02/the-accidental-dba/">The Accidental DBA</a>,” <em>charity.wtf</em>, October 2, 2016.</li>
<li>Arthur J. Bernstein, Philip M. Lewis, and Shiyong Lu: “<a href="http://db.cs.berkeley.edu/cs286/papers/isolation-icde2000.pdf">Semantic Conditions for Correctness at Different Isolation Levels</a>,” at <em>16th International Conference on Data Engineering</em> (ICDE), February 2000. <a href="http://dx.doi.org/10.1109/ICDE.2000.839387">doi:10.1109/ICDE.2000.839387</a></li>
<li>Sudhir Jorwekar, Alan Fekete, Krithi Ramamritham, and S. Sudarshan: “<a href="http://www.vldb.org/conf/2007/papers/industrial/p1263-jorwekar.pdf">Automating the Detection of Snapshot Isolation Anomalies</a>,” at <em>33rd International Conference on Very Large Data Bases</em> (VLDB), September 2007.</li>
<li>Kyle Kingsbury: <a href="https://aphyr.com/tags/jepsen">Jepsen blog post series</a>, <em>aphyr.com</em>, 2013–2016.</li>
<li>Michael Jouravlev: “<a href="http://www.theserverside.com/news/1365146/Redirect-After-Post">Redirect After Post</a>,” <em>theserverside.com</em>, August 1, 2004.</li>
<li>Jerome H. Saltzer, David P. Reed, and David D. Clark: “<a href="http://www.ece.drexel.edu/courses/ECE-C631-501/SalRee1984.pdf">End-to-End Arguments in System Design</a>,” <em>ACM Transactions on Computer Systems</em>, volume 2, number 4, pages 277–288, November 1984. <a href="http://dx.doi.org/10.1145/357401.357402">doi:10.1145/357401.357402</a></li>
<li>Peter Bailis, Alan Fekete, Michael J. Franklin, et al.: “<a href="http://arxiv.org/pdf/1402.2237.pdf">Coordination-Avoiding Database Systems</a>,” <em>Proceedings of the VLDB Endowment</em>, volume 8, number 3, pages 185–196, November 2014.</li>
<li>Alex Yarmula: “<a href="https://blog.twitter.com/2016/strong-consistency-in-manhattan">Strong Consistency in Manhattan</a>,” <em>blog.twitter.com</em>, March 17, 2016.</li>
<li>Douglas B Terry, Marvin M Theimer, Karin Petersen, et al.: “<a href="http://css.csail.mit.edu/6.824/2014/papers/bayou-conflicts.pdf">Managing Update Conflicts in Bayou, a Weakly Connected Replicated Storage System</a>,” at <em>15th ACM Symposium on Operating Systems Principles</em> (SOSP), pages 172–182, December 1995. <a href="http://dx.doi.org/10.1145/224056.224070">doi:10.1145/224056.224070</a></li>
<li>Jim Gray: “<a href="http://research.microsoft.com/en-us/um/people/gray/papers/theTransactionConcept.pdf">The Transaction Concept: Virtues and Limitations</a>,” at <em>7th International Conference on Very Large Data Bases</em> (VLDB), September 1981.</li>
<li>Hector Garcia-Molina and Kenneth Salem: “<a href="http://www.cs.cornell.edu/andru/cs711/2002fa/reading/sagas.pdf">Sagas</a>,” at <em>ACM International Conference on Management of Data</em> (SIGMOD), May 1987. <a href="http://dx.doi.org/10.1145/38713.38742">doi:10.1145/38713.38742</a></li>
<li>Pat Helland: “<a href="http://blogs.msdn.com/b/pathelland/archive/2007/05/15/memories-guesses-and-apologies.aspx">Memories, Guesses, and Apologies</a>,” <em>blogs.msdn.com</em>, May 15, 2007.</li>
<li>Yoongu Kim, Ross Daly, Jeremie Kim, et al.: “<a href="https://users.ece.cmu.edu/~yoonguk/papers/kim-isca14.pdf">Flipping Bits in Memory Without Accessing Them: An Experimental Study of DRAM Disturbance Errors</a>,” at <em>41st Annual International Symposium on Computer Architecture</em> (ISCA), June 2014. <a href="http://dx.doi.org/10.1145/2678373.2665726">doi:10.1145/2678373.2665726</a></li>
<li>Mark Seaborn and Thomas Dullien: “<a href="https://googleprojectzero.blogspot.co.uk/2015/03/exploiting-dram-rowhammer-bug-to-gain.html">Exploiting the DRAM Rowhammer Bug to Gain Kernel Privileges</a>,” <em>googleprojectzero.blogspot.co.uk</em>, March 9, 2015.</li>
<li>Jim N. Gray and Catharine van Ingen: “<a href="https://www.microsoft.com/en-us/research/publication/empirical-measurements-of-disk-failure-rates-and-error-rates/">Empirical Measurements of Disk Failure Rates and Error Rates</a>,” Microsoft Research, MSR-TR-2005-166, December 2005.</li>
<li>Annamalai Gurusami and Daniel Price: “<a href="http://bugs.mysql.com/bug.php?id=73170">Bug #73170: Duplicates in Unique Secondary Index Because of Fix of Bug#68021</a>,” <em>bugs.mysql.com</em>, July 2014.</li>
<li>Gary Fredericks: “<a href="https://github.com/gfredericks/pg-serializability-bug">Postgres Serializability Bug</a>,” <em>github.com</em>, September 2015.</li>
<li>Xiao Chen: “<a href="http://blog.cloudera.com/blog/2016/12/hdfs-datanode-scanners-and-disk-checker-explained/">HDFS DataNode Scanners and Disk Checker Explained</a>,” <em>blog.cloudera.com</em>, December 20, 2016.</li>
<li>Jay Kreps: “<a href="http://blog.empathybox.com/post/19574936361/getting-real-about-distributed-system-reliability">Getting Real About Distributed System Reliability</a>,” <em>blog.empathybox.com</em>, March 19, 2012.</li>
<li>Martin Fowler: “<a href="http://martinfowler.com/articles/lmax.html">The LMAX Architecture</a>,” <em>martinfowler.com</em>, July 12, 2011.</li>
<li>Sam Stokes: “<a href="http://blog.samstokes.co.uk/blog/2016/07/11/move-fast-with-confidence/">Move Fast with Confidence</a>,” <em>blog.samstokes.co.uk</em>, July 11, 2016.</li>
<li>“<a href="http://intelledger.github.io/introduction.html">Sawtooth Lake Documentation</a>,” Intel Corporation, <em>intelledger.github.io</em>, 2016.</li>
<li>Richard Gendal Brown: “<a href="https://gendal.me/2016/04/05/introducing-r3-corda-a-distributed-ledger-designed-for-financial-services/">Introducing R3 Corda™: A Distributed Ledger Designed for Financial Services</a>,” <em>gendal.me</em>, April 5, 2016.</li>
<li>Trent McConaghy, Rodolphe Marques, Andreas Müller, et al.: “<a href="https://www.bigchaindb.com/whitepaper/bigchaindb-whitepaper.pdf">BigchainDB: A Scalable Blockchain Database</a>,” <em>bigchaindb.com</em>, June 8, 2016.</li>
<li>Ralph C. Merkle: “<a href="https://people.eecs.berkeley.edu/~raluca/cs261-f15/readings/merkle.pdf">A Digital Signature Based on a Conventional Encryption Function</a>,” at <em>CRYPTO '87</em>, August 1987. <a href="http://dx.doi.org/10.1007/3-540-48184-2_32">doi:10.1007/3-540-48184-2_32</a></li>
<li>Ben Laurie: “<a href="http://queue.acm.org/detail.cfm?id=2668154">Certificate Transparency</a>,” <em>ACM Queue</em>, volume 12, number 8, pages 10-19, August 2014. <a href="http://dx.doi.org/10.1145/2668152.2668154">doi:10.1145/2668152.2668154</a></li>
<li>Mark D. Ryan: “<a href="http://www.internetsociety.org/doc/enhanced-certificate-transparency-and-end-end-encrypted-mail">Enhanced Certificate Transparency and End-to-End Encrypted Mail</a>,” at <em>Network and Distributed System Security Symposium</em> (NDSS), February 2014. <a href="http://dx.doi.org/10.14722/ndss.2014.23379">doi:10.14722/ndss.2014.23379</a></li>
<li>“<a href="http://www.acm.org/about/se-code">Software Engineering Code of Ethics and Professional Practice</a>,” Association for Computing Machinery, <em>acm.org</em>, 1999.</li>
<li>François Chollet: “<a href="https://twitter.com/fchollet/status/792958695722201088">Software development is starting to involve important ethical choices</a>,” <em>twitter.com</em>, October 30, 2016.</li>
<li>Igor Perisic: “<a href="https://engineering.linkedin.com/blog/2016/11/making-hard-choices--the-quest-for-ethics-in-machine-learning">Making Hard Choices: The Quest for Ethics in Machine Learning</a>,” <em>engineering.linkedin.com</em>, November 2016.</li>
<li>John Naughton: “<a href="https://www.theguardian.com/commentisfree/2015/dec/06/algorithm-writers-should-have-code-of-conduct">Algorithm Writers Need a Code of Conduct</a>,” <em>theguardian.com</em>, December 6, 2015.</li>
<li>Logan Kugler: “<a href="http://cacm.acm.org/magazines/2016/6/202655-what-happens-when-big-data-blunders/fulltext">What Happens When Big Data Blunders?</a>,” <em>Communications of the ACM</em>, volume 59, number 6, pages 15–16, June 2016. <a href="http://dx.doi.org/10.1145/2911975">doi:10.1145/2911975</a></li>
<li>Bill Davidow: “<a href="http://www.theatlantic.com/technology/archive/2014/02/welcome-to-algorithmic-prison/283985/">Welcome to Algorithmic Prison</a>,” <em>theatlantic.com</em>, February 20, 2014.</li>
<li>Don Peck: “<a href="http://www.theatlantic.com/magazine/archive/2013/12/theyre-watching-you-at-work/354681/">They're Watching You at Work</a>,” <em>theatlantic.com</em>, December 2013.</li>
<li>Leigh Alexander: “<a href="https://www.theguardian.com/technology/2016/aug/03/algorithm-racist-human-employers-work">Is an Algorithm Any Less Racist Than a Human?</a>” <em>theguardian.com</em>, August 3, 2016.</li>
<li>Jesse Emspak: “<a href="https://www.scientificamerican.com/article/how-a-machine-learns-prejudice/">How a Machine Learns Prejudice</a>,” <em>scientificamerican.com</em>, December 29, 2016.</li>
<li>Maciej Cegłowski: “<a href="http://idlewords.com/talks/sase_panel.htm">The Moral Economy of Tech</a>,” <em>idlewords.com</em>, June 2016.</li>
<li>Cathy O'Neil: <a href="https://weaponsofmathdestructionbook.com/"><em>Weapons of Math Destruction: How Big Data Increases Inequality and Threatens Democracy</em></a>. Crown Publishing, 2016. ISBN: 978-0-553-41881-1</li>
<li>Julia Angwin: “<a href="http://www.nytimes.com/2016/08/01/opinion/make-algorithms-accountable.html">Make Algorithms Accountable</a>,” <em>nytimes.com</em>, August 1, 2016.</li>
<li>Bryce Goodman and Seth Flaxman: “<a href="https://arxiv.org/abs/1606.08813">European Union Regulations on Algorithmic Decision-Making and a ‘Right to Explanation’</a>,” <em>arXiv:1606.08813</em>, August 31, 2016.</li>
<li>“<a href="https://www.commerce.senate.gov/public/index.cfm/reports?ID=57C428EC-8F20-44EE-BFB8-A570E9BE0CCC">A Review of the Data Broker Industry: Collection, Use, and Sale of Consumer Data for Marketing Purposes</a>,” Staff Report, <em>United States Senate Committee on Commerce, Science, and Transportation</em>, <em>commerce.senate.gov</em>, December 2013.</li>
<li>Olivia Solon: “<a href="https://www.theguardian.com/technology/2016/nov/10/facebook-fake-news-election-conspiracy-theories">Facebook’s Failure: Did Fake News and Polarized Politics Get Trump Elected?</a>” <em>theguardian.com</em>, November 10, 2016.</li>
<li>Donella H. Meadows and Diana Wright: <em>Thinking in Systems: A Primer</em>. Chelsea Green Publishing, 2008. ISBN: 978-1-603-58055-7</li>
<li>Daniel J. Bernstein: “<a href="https://twitter.com/hashbreaker/status/598076230437568512">Listening to a ‘big data’/‘data science’ talk</a>,” <em>twitter.com</em>, May 12, 2015.</li>
<li>Marc Andreessen: “<a href="http://genius.com/Marc-andreessen-why-software-is-eating-the-world-annotated">Why Software Is Eating the World</a>,” <em>The Wall Street Journal</em>, 20 August 2011.</li>
<li>J. M. Porup: “<a href="http://arstechnica.com/security/2016/01/how-to-search-the-internet-of-things-for-photos-of-sleeping-babies/">‘Internet of Things’ Security Is Hilariously Broken and Getting Worse</a>,” <em>arstechnica.com</em>, January 23, 2016.</li>
<li>Bruce Schneier: <a href="https://www.schneier.com/books/data_and_goliath/"><em>Data and Goliath: The Hidden Battles to Collect Your Data and Control Your World</em></a>. W. W. Norton, 2015. ISBN: 978-0-393-35217-7</li>
<li>The Grugq: “<a href="https://grugq.tumblr.com/post/142799983558/nothing-to-hide">Nothing to Hide</a>,” <em>grugq.tumblr.com</em>, April 15, 2016.</li>
<li>Tony Beltramelli: “<a href="https://arxiv.org/abs/1512.05616">Deep-Spying: Spying Using Smartwatch and Deep Learning</a>,” Masters Thesis, IT University of Copenhagen, December 2015. Available at <em>arxiv.org/abs/1512.05616</em></li>
<li>Shoshana Zuboff: “<a href="http://papers.ssrn.com/sol3/papers.cfm?abstract_id=2594754">Big Other: Surveillance Capitalism and the Prospects of an Information Civilization</a>,” <em>Journal of Information Technology</em>, volume 30, number 1, pages 75–89, April 2015.<a href="http://dx.doi.org/10.1057/jit.2015.5">doi:10.1057/jit.2015.5</a></li>
<li>Carina C. Zona: “<a href="https://www.youtube.com/watch?v=YRI40A4tyWU">Consequences of an Insightful Algorithm</a>,” at <em>GOTO Berlin</em>, November 2016.</li>
<li>Bruce Schneier: “<a href="https://www.schneier.com/essays/archives/2016/03/data_is_a_toxic_asse.html">Data Is a Toxic Asset, So Why Not Throw It Out?</a>,” <em>schneier.com</em>, March 1, 2016.</li>
<li>John E. Dunn: “<a href="http://www.techworld.com/security/uks-most-infamous-data-breaches-2016-3604586/">The UK’s 15 Most Infamous Data Breaches</a>,” <em>techworld.com</em>, November 18, 2016.</li>
<li>Cory Scott: “<a href="https://twitter.com/cory_scott/status/706586399483437056">Data is not toxic - which implies no benefit - but rather hazardous material, where we must balance need vs. want</a>,” <em>twitter.com</em>, March 6, 2016.</li>
<li>Bruce Schneier: “<a href="https://www.schneier.com/essays/archives/2013/07/mission_creep_when_e.html">Mission Creep: When Everything Is Terrorism</a>,” <em>schneier.com</em>, July 16, 2013.</li>
<li>Lena Ulbricht and Maximilian von Grafenstein: “<a href="http://policyreview.info/articles/analysis/big-data-big-power-shifts">Big Data: Big Power Shifts?</a>,” <em>Internet Policy Review</em>, volume 5, number 1, March 2016. <a href="http://dx.doi.org/10.14763/2016.1.406">doi:10.14763/2016.1.406</a></li>
<li>Ellen P. Goodman and Julia Powles: “<a href="https://www.theguardian.com/technology/2016/sep/28/google-facebook-powerful-secretive-empire-transparency">Facebook and Google: Most Powerful and Secretive Empires We've Ever Known</a>,” <em>theguardian.com</em>, September 28, 2016.</li>
<li><a href="http://eur-lex.europa.eu/legal-content/EN/TXT/?uri=CELEX:31995L0046">Directive 95/46/EC on the protection of individuals with regard to the processing of personal data and on the free movement of such data</a>, Official Journal of the European Communities No. L 281/31, <em>eur-lex.europa.eu</em>, November 1995.</li>
<li>Brendan Van Alsenoy: “<a href="https://lirias.kuleuven.be/handle/123456789/545027">Regulating Data Protection: The Allocation of Responsibility and Risk Among Actors Involved in Personal Data Processing</a>,” Thesis, KU Leuven Centre for IT and IP Law, August 2016.</li>
<li>Michiel Rhoen: “<a href="http://policyreview.info/articles/analysis/beyond-consent-improving-data-protection-through-consumer-protection-law">Beyond Consent: Improving Data Protection Through Consumer Protection Law</a>,” <em>Internet Policy Review</em>, volume 5, number 1, March 2016. <a href="http://dx.doi.org/10.14763/2016.1.404">doi:10.14763/2016.1.404</a></li>
<li>Jessica Leber: “<a href="https://www.fastcoexist.com/3057514/your-data-footprint-is-affecting-your-life-in-ways-you-cant-even-imagine">Your Data Footprint Is Affecting Your Life in Ways You Can’t Even Imagine</a>,” <em>fastcoexist.com</em>, March 15, 2016.</li>
<li>Maciej Cegłowski: “<a href="http://idlewords.com/talks/haunted_by_data.htm">Haunted by Data</a>,” <em>idlewords.com</em>, October 2015.</li>
<li>Sam Thielman: “<a href="https://www.theguardian.com/us-news/2016/jan/13/us-library-records-purged-data-privacy">You Are Not What You Read: Librarians Purge User Data to Protect Privacy</a>,” <em>theguardian.com</em>, January 13, 2016.</li>
<li>Conor Friedersdorf: “<a href="http://www.theatlantic.com/politics/archive/2014/05/edward-snowdens-other-motive-for-leaking/370068/">Edward Snowden’s Other Motive for Leaking</a>,” <em>theatlantic.com</em>, May 13, 2014.</li>
<li>Phillip Rogaway: “<a href="http://web.cs.ucdavis.edu/~rogaway/papers/moral-fn.pdf">The Moral Character of Cryptographic Work</a>,” Cryptology ePrint 2015/1162, December 2015.</li>
</ol>
<div class="footnote">
<hr />
<ol>
<li id="fn:2">
<p>在微服务方法中，你也可以通过在处理购买的服务中本地缓存汇率来避免同步网络请求。但是为了保证缓存的新鲜度，你需要定期轮询汇率以获取其更新，或订阅变更流 —— 这恰好是数据流方法中发生的事情。&#160;<a class="footnote-backref" href="#fnref:2" title="Jump back to footnote 1 in the text">&#8617;</a></p>
</li>
</ol>
</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  回到页面顶部
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="页脚" >
        
          
          <a href="11_streaming_processing.html" class="md-footer__link md-footer__link--prev" aria-label="上一页: 第十一章：流处理">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                上一页
              </span>
              <div class="md-ellipsis">
                第十一章：流处理
              </div>
            </div>
          </a>
        
        
          
          <a href="../../code_guide/design_principle.html" class="md-footer__link md-footer__link--next" aria-label="下一页: 设计原则">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                下一页
              </span>
              <div class="md-ellipsis">
                设计原则
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs", "navigation.tabs.sticky", "navigation.top", "navigation.footer", "navigation.indexes"], "search": "../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
        <script src="../../.mkdocs/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>